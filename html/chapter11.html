<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>ç¬¬11ç« ï¼šAgentå¹³ç­‰æœåŠ¡ä¸æ™ºèƒ½åŒ–åŒ…å®¹è®¾è®¡</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¾å›¢è¶…è„‘ç³»ç»Ÿå¤ç°æ•™ç¨‹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬1ç« ï¼šå›¾çµç®—æ³•å¹³å°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬2ç« ï¼šå¤§è§„æ¨¡ç‰¹å¾è®¡ç®—</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬3ç« ï¼šæœºå™¨å­¦ä¹ å¹³å°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬4ç« ï¼šè°ƒåº¦å¼•æ“ - å®æ—¶å¤šäººå¤šç‚¹åˆ†é…</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬5ç« ï¼šè§„åˆ’å¼•æ“ï¼ˆç½‘ç»œ/ç«™ç‚¹/è¿åŠ›ç»“æ„è§„åˆ’ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬6ç« ï¼šETAç³»ç»Ÿ - å…¨é“¾è·¯æ—¶é—´é¢„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬7ç« ï¼šLBSç³»ç»Ÿï¼ˆåœ°å›¾/åœ°å€åº“/è·¯å¾„è§„åˆ’ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬8ç« ï¼šå®šä»·ç³»ç»Ÿ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬9ç« ï¼šç²¾å‡†è¥é”€ä¸ä¼šå‘˜ä½“ç³»</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬10ç« ï¼šåæœºå™¨äººæ»¥ç”¨ä¸è¯„è®ºçœŸå®æ€§ä¿éšœ</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬11ç« ï¼šAgentå¹³ç­‰æœåŠ¡ä¸æ™ºèƒ½åŒ–åŒ…å®¹è®¾è®¡</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">1) å›¾çµç®—æ³•å¹³å°ï¼ˆç®—æ³•åŸºç¡€è®¾æ–½ï¼‰</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="11agent">ç¬¬11ç« ï¼šAgentå¹³ç­‰æœåŠ¡ä¸æ™ºèƒ½åŒ–åŒ…å®¹è®¾è®¡</h1>
<h2 id="_1">æœ¬ç« å¯¼è¯»</h2>
<p>åœ¨å¤–å–å¹³å°çš„æ¼”è¿›å†ç¨‹ä¸­ï¼Œæˆ‘ä»¬è§è¯äº†ä»çº¯äººå·¥æ“ä½œåˆ°æ™ºèƒ½åŒ–æœåŠ¡çš„è½¬å˜ã€‚å¦‚ä»Šï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·é€šè¿‡æ™ºèƒ½åŠ©æ‰‹ï¼ˆAgentï¼‰ä¸å¹³å°äº¤äº’â€”â€”å¸®åŠ©è€å¹´äººä¸‹å•çš„è¯­éŸ³åŠ©æ‰‹ã€ååŠ©è§†éšœç”¨æˆ·çš„å±å¹•æœ—è¯»å™¨ã€ä»£è¡¨å•†å®¶è‡ªåŠ¨æ¥å•çš„æ™ºèƒ½ç³»ç»Ÿç­‰ã€‚è¿™äº›Agentæ—¢ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„"ç”¨æˆ·"ï¼Œä¹Ÿä¸æ˜¯éœ€è¦é˜²èŒƒçš„"æœºå™¨äºº"ï¼Œè€Œæ˜¯æ•°å­—ä¸–ç•Œä¸­ç”¨æˆ·æ„å¿—çš„å»¶ä¼¸ã€‚</p>
<p>æœ¬ç« å°†æ¢è®¨ä¸€ä¸ªå‰ç»æ€§çš„è®®é¢˜ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªå¯¹Agentå‹å¥½çš„æœåŠ¡æ¶æ„ï¼Ÿæˆ‘ä»¬éœ€è¦åœ¨ä¿éšœå¹³å°å®‰å…¨çš„å‰æä¸‹ï¼Œå…¬å¹³å¯¹å¾…å„ç±»åˆæ³•Agentï¼Œè®©æŠ€æœ¯çœŸæ­£æœåŠ¡äºäººçš„éœ€æ±‚ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯æ¶æ„çš„å‡çº§ï¼Œæ›´æ˜¯æœåŠ¡ç†å¿µçš„é©æ–°â€”â€”ä»"é˜²å¾¡æ‰€æœ‰è‡ªåŠ¨åŒ–ç¨‹åº"è½¬å‘"æ‹¥æŠ±å–„æ„çš„æ™ºèƒ½åŒ–"ã€‚</p>
<h2 id="_2">å­¦ä¹ ç›®æ ‡</h2>
<p>å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p>
<ol>
<li><strong>ç†è§£AgentæœåŠ¡çš„å¿…è¦æ€§</strong>ï¼šæ˜ç¡®ä¸ºä»€ä¹ˆéœ€è¦æ”¯æŒAgentï¼Œä»¥åŠå®ƒå¯¹å¹³å°ç”Ÿæ€çš„ç§¯ææ„ä¹‰</li>
<li><strong>è®¾è®¡ä¿¡ä»»ä½“ç³»</strong>ï¼šæ„å»ºAgentèº«ä»½è®¤è¯å’Œä¿¡ä»»è¯„çº§æœºåˆ¶ï¼Œå®ç°ç²¾ç»†åŒ–ç®¡ç†</li>
<li><strong>åŒºåˆ†å–„æ¶æ„å›¾</strong>ï¼šæŒæ¡åŒºåˆ†å–„æ„Agentä¸æ¶æ„æœºå™¨äººçš„æŠ€æœ¯æ–¹æ³•å’Œä¸šåŠ¡é€»è¾‘</li>
<li><strong>å®ç°åŠ¨æ€é™æµ</strong>ï¼šè®¾è®¡æ™ºèƒ½åŒ–çš„APIé€Ÿç‡é™åˆ¶ç­–ç•¥ï¼Œå¹³è¡¡å®‰å…¨ä¸æ•ˆç‡</li>
<li><strong>ä¼˜åŒ–æ¥å£è®¾è®¡</strong>ï¼šåˆ›å»ºAgentå‹å¥½çš„APIæ¥å£ï¼Œé™ä½é›†æˆé—¨æ§›</li>
<li><strong>å»ºç«‹æˆæƒæœºåˆ¶</strong>ï¼šå®ç°ç”¨æˆ·æˆæƒä¸‹çš„Agentä»£ç†æ¡†æ¶ï¼Œä¿æŠ¤ç”¨æˆ·æƒç›Š</li>
<li><strong>ç¡®ä¿åˆè§„è¿è¥</strong>ï¼šç†è§£ç›¸å…³æ³•å¾‹æ³•è§„è¦æ±‚ï¼Œè®¾è®¡éšç§ä¿æŠ¤æ–¹æ¡ˆ</li>
<li><strong>åŸ¹è‚²å¥åº·ç”Ÿæ€</strong>ï¼šåˆ¶å®šAgentç”Ÿæ€çš„æ¿€åŠ±ä¸æ²»ç†ç­–ç•¥ï¼Œä¿ƒè¿›è‰¯æ€§å‘å±•</li>
</ol>
<h2 id="111-agent">11.1 AgentæœåŠ¡çš„æ¼”è¿›èƒŒæ™¯</h2>
<h3 id="1111">11.1.1 ä»æ’æ–¥åˆ°æ¥çº³çš„è½¬å˜</h3>
<p>æ—©æœŸçš„äº’è”ç½‘æœåŠ¡å°†æ‰€æœ‰è‡ªåŠ¨åŒ–ç¨‹åºè§†ä¸ºæ½œåœ¨å¨èƒã€‚è¿™ç§"ä¸€åˆ€åˆ‡"çš„é˜²å¾¡ç­–ç•¥æºäºå¯¹çˆ¬è™«ã€åˆ·å•ã€DDoSæ”»å‡»ç­‰æ¶æ„è¡Œä¸ºçš„æ‹…å¿§ã€‚éªŒè¯ç ã€è®¾å¤‡æŒ‡çº¹ã€è¡Œä¸ºåˆ†æç­‰åæœºå™¨äººæŠ€æœ¯ä¸æ–­å‡çº§ï¼Œå½¢æˆäº†ä¸€é“é“é˜²çº¿ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€AIæŠ€æœ¯çš„æ™®åŠå’Œç”¨æˆ·éœ€æ±‚çš„æ¼”å˜ï¼Œè¿™ç§ç»å¯¹æ’æ–¥çš„ç«‹åœºå¼€å§‹æ¾åŠ¨ï¼š</p>
<p><strong>è®¤çŸ¥è½¬å˜çš„å…³é”®èŠ‚ç‚¹</strong>ï¼š</p>
<ul>
<li>2016-2018ï¼šè¯­éŸ³åŠ©æ‰‹ï¼ˆSiriã€å°çˆ±åŒå­¦ï¼‰å¼€å§‹ä»£è¡¨ç”¨æˆ·æ‰§è¡Œä»»åŠ¡</li>
<li>2019-2021ï¼šRPAï¼ˆæœºå™¨äººæµç¨‹è‡ªåŠ¨åŒ–ï¼‰åœ¨ä¼ä¸šç«¯å¹¿æ³›åº”ç”¨</li>
<li>2022-2024ï¼šChatGPTç­‰LLMå¸¦æ¥çš„Agenté©å‘½ï¼Œç”¨æˆ·æœŸæœ›AIèƒ½ä»£ç†æ›´å¤šäº‹åŠ¡</li>
</ul>
<div class="codehilite"><pre><span></span><code>ä¼ ç»Ÿé˜²å¾¡æ€ç»´                    åŒ…å®¹æ€§æœåŠ¡æ€ç»´
     â”‚                              â”‚
     â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰€æœ‰Botéƒ½æ˜¯ â”‚              â”‚  åŒºåˆ†å–„æ„   â”‚
â”‚   æ½œåœ¨å¨èƒ  â”‚    â”€â”€â”€â”€â–º     â”‚  ä¸æ¶æ„     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                              â”‚
     â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…¨é¢å°å µ   â”‚              â”‚ åˆ†çº§æœåŠ¡   â”‚
â”‚             â”‚    â”€â”€â”€â”€â–º     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>è½¬å˜çš„å†…åœ¨é€»è¾‘</strong>ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šé˜»æ­¢å–„æ„Agentä¼šæŸå®³çœŸå®ç”¨æˆ·çš„ä½“éªŒ</li>
<li><strong>æ•ˆç‡æå‡éœ€æ±‚</strong>ï¼šAgentå¯ä»¥æé«˜å¹³å°è¿è¥æ•ˆç‡ï¼Œé™ä½æœåŠ¡æˆæœ¬</li>
<li><strong>ç«äº‰å‹åŠ›é©±åŠ¨</strong>ï¼šæ”¯æŒAgentæˆä¸ºå¹³å°å·®å¼‚åŒ–ç«äº‰çš„æ–°ç»´åº¦</li>
<li><strong>ç›‘ç®¡åˆè§„è¦æ±‚</strong>ï¼šæ— éšœç¢è®¿é—®ç­‰æ³•è§„è¦æ±‚å¹³å°æä¾›ç¨‹åºåŒ–æ¥å£</li>
</ol>
<h3 id="1112">11.1.2 ç”¨æˆ·éœ€æ±‚çš„å¤šæ ·åŒ–é©±åŠ¨</h3>
<p>ä¸åŒç”¨æˆ·ç¾¤ä½“å¯¹AgentæœåŠ¡æœ‰ç€è¿«åˆ‡éœ€æ±‚ï¼Œè¿™äº›éœ€æ±‚æ¨åŠ¨ç€å¹³å°å¿…é¡»é‡æ–°æ€è€ƒæœåŠ¡è¾¹ç•Œï¼š</p>
<p><strong>ç‰¹æ®Šç¾¤ä½“çš„åˆšéœ€</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>ç”¨æˆ·ç±»å‹        Agentéœ€æ±‚                 ä»·å€¼ä¸»å¼ 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è§†éšœç”¨æˆ·    â†’  å±å¹•é˜…è¯»å™¨é›†æˆ      â†’   æ— éšœç¢è®¿é—®
è€å¹´ç”¨æˆ·    â†’  è¯­éŸ³åŠ©æ‰‹ä¸‹å•        â†’   é™ä½ä½¿ç”¨é—¨æ§›  
å¿™ç¢Œç™½é¢†    â†’  è‡ªåŠ¨è®¢é¤è§„åˆ’        â†’   æ—¶é—´èŠ‚çœ
å°å¾®å•†å®¶    â†’  è‡ªåŠ¨æ¥å•ç³»ç»Ÿ        â†’   äººåŠ›æˆæœ¬é™ä½
ä¼ä¸šå®¢æˆ·    â†’  æ‰¹é‡è®¢é¤ç®¡ç†        â†’   æµç¨‹è‡ªåŠ¨åŒ–
</code></pre></div>

<p><strong>å…¸å‹ä½¿ç”¨åœºæ™¯åˆ†æ</strong>ï¼š</p>
<ol>
<li>
<p><strong>è¾…åŠ©æŠ€æœ¯åœºæ™¯</strong>ï¼š
   - å±å¹•é˜…è¯»å™¨éœ€è¦ç»“æ„åŒ–çš„æ•°æ®æ¥å£
   - è¯­éŸ³åŠ©æ‰‹éœ€è¦ç®€åŒ–çš„äº¤äº’æµç¨‹
   - æ‰‹åŠ¿è¯†åˆ«éœ€è¦æ˜ç¡®çš„æ“ä½œåé¦ˆ</p>
</li>
<li>
<p><strong>æ•ˆç‡æå‡åœºæ™¯</strong>ï¼š
   - å®šæ—¶è‡ªåŠ¨ä¸‹å•ï¼ˆå¦‚æ¯æ—¥åˆé¤ï¼‰
   - åŸºäºæ—¥ç¨‹çš„æ™ºèƒ½è®¢é¤å»ºè®®
   - å›¢é¤çš„æ‰¹é‡ä¸‹å•ä¸ç®¡ç†</p>
</li>
<li>
<p><strong>å•†å®¶è‡ªåŠ¨åŒ–åœºæ™¯</strong>ï¼š
   - åº“å­˜ä¸èœå•çš„è‡ªåŠ¨åŒæ­¥
   - è®¢å•çš„è‡ªåŠ¨ç¡®è®¤ä¸åˆ†é…
   - é«˜å³°æœŸçš„æ™ºèƒ½è°ƒåº¦</p>
</li>
</ol>
<h3 id="1113">11.1.3 æŠ€æœ¯æˆç†Ÿåº¦çš„æå‡</h3>
<p>æŠ€æœ¯è¿›æ­¥ä¸ºAgentæœåŠ¡æä¾›äº†åšå®åŸºç¡€ï¼š</p>
<p><strong>å…³é”®æŠ€æœ¯çªç ´</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>æŠ€æœ¯ç»´åº¦              2020å‰              2024ç°çŠ¶
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
èº«ä»½è®¤è¯    â”‚   ç®€å•Token      â†’    é›¶çŸ¥è¯†è¯æ˜ã€DID
æ„å›¾ç†è§£    â”‚   è§„åˆ™åŒ¹é…      â†’    LLMè¯­ä¹‰ç†è§£  
è¡Œä¸ºåˆ†æ    â”‚   ç»Ÿè®¡ç‰¹å¾      â†’    æ·±åº¦åºåˆ—æ¨¡å‹
ä¿¡ä»»è¯„ä¼°    â”‚   é»‘ç™½åå•      â†’    åŠ¨æ€ä¿¡ä»»ç½‘ç»œ
æ¥å£è®¾è®¡    â”‚   REST API      â†’    GraphQL/gRPC
é™æµç­–ç•¥    â”‚   å›ºå®šé˜ˆå€¼      â†’    è‡ªé€‚åº”ç®—æ³•
</code></pre></div>

<p><strong>æŠ€æœ¯æ ˆçš„ç°ä»£åŒ–</strong>ï¼š</p>
<ol>
<li><strong>èº«ä»½å±‚</strong>ï¼š</li>
</ol>
<div class="codehilite"><pre><span></span><code>DIDï¼ˆå»ä¸­å¿ƒåŒ–èº«ä»½ï¼‰
     â”‚
     â–¼
å¯éªŒè¯å‡­è¯ï¼ˆVCï¼‰
     â”‚
     â–¼
é›¶çŸ¥è¯†è¯æ˜ï¼ˆZKPï¼‰
</code></pre></div>

<ol start="2">
<li><strong>ç†è§£å±‚</strong>ï¼š</li>
</ol>
<div class="codehilite"><pre><span></span><code>è‡ªç„¶è¯­è¨€ â†’ LLMç¼–ç  â†’ æ„å›¾è¯†åˆ« â†’ ä»»åŠ¡è§„åˆ’
             â†“
        å‘é‡æ•°æ®åº“
             â†“  
        ç›¸ä¼¼åº¦åŒ¹é…
</code></pre></div>

<ol start="3">
<li><strong>æ‰§è¡Œå±‚</strong>ï¼š</li>
</ol>
<div class="codehilite"><pre><span></span><code>ä»»åŠ¡åˆ†è§£ â†’ å¹¶è¡Œè°ƒåº¦ â†’ ç»“æœèšåˆ â†’ åé¦ˆå­¦ä¹ 
     â†“         â†“         â†“         â†“
  å¾®æœåŠ¡   æ¶ˆæ¯é˜Ÿåˆ—   ç¼“å­˜å±‚    ML Pipeline
</code></pre></div>

<h3 id="1114">11.1.4 å•†ä¸šä»·å€¼çš„é‡æ–°è®¤è¯†</h3>
<p>ä»çº¯ç²¹çš„æˆæœ¬ä¸­å¿ƒåˆ°æ½œåœ¨çš„å¢é•¿å¼•æ“ï¼ŒAgentæœåŠ¡çš„å•†ä¸šä»·å€¼è¢«é‡æ–°å®šä¹‰ï¼š</p>
<p><strong>ä»·å€¼åˆ›é€ æ¨¡å‹</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>                    Agentç”Ÿæ€ä»·å€¼é“¾
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                             â”‚
    â”‚   å¼€å‘è€…  â†’  Agent  â†’  ç”¨æˆ·  â†’  å¹³å°        â”‚
    â”‚     â†“         â†“        â†“        â†“          â”‚
    â”‚   åˆ›æ–°     æ•ˆç‡     ä½“éªŒ     å¢é•¿          â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>é‡åŒ–æ”¶ç›Šåˆ†æ</strong>ï¼š</p>
<ol>
<li>
<p><strong>ç›´æ¥æ”¶ç›Š</strong>ï¼š
   - <strong>äº¤æ˜“é‡æå‡</strong>ï¼šAgenté©±åŠ¨çš„è‡ªåŠ¨ä¸‹å•å æ¯”å¯è¾¾15-20%
   - <strong>å®¢å•ä»·å¢é•¿</strong>ï¼šæ™ºèƒ½æ¨èæå‡å®¢å•ä»·8-12%
   - <strong>è¿è¥æˆæœ¬é™ä½</strong>ï¼šå®¢æœæˆæœ¬é™ä½30-40%</p>
</li>
<li>
<p><strong>é—´æ¥æ”¶ç›Š</strong>ï¼š
   - <strong>ç”¨æˆ·ç²˜æ€§</strong>ï¼šé›†æˆAgentçš„ç”¨æˆ·ç•™å­˜ç‡æå‡25%
   - <strong>ç”Ÿæ€ç¹è£</strong>ï¼šç¬¬ä¸‰æ–¹å¼€å‘è€…è´¡çŒ®åˆ›æ–°åœºæ™¯
   - <strong>æ•°æ®ä»·å€¼</strong>ï¼šAgentäº¤äº’äº§ç”Ÿé«˜è´¨é‡è®­ç»ƒæ•°æ®</p>
</li>
<li>
<p><strong>æˆ˜ç•¥æ”¶ç›Š</strong>ï¼š
   - <strong>å¹³å°æŠ¤åŸæ²³</strong>ï¼šAgentç”Ÿæ€å½¢æˆç½‘ç»œæ•ˆåº”
   - <strong>æ ‡å‡†åˆ¶å®šæƒ</strong>ï¼šå®šä¹‰è¡Œä¸šAgentæœåŠ¡æ ‡å‡†
   - <strong>æœªæ¥å¸ƒå±€</strong>ï¼šä¸ºAGIæ—¶ä»£åšå¥½å‡†å¤‡</p>
</li>
</ol>
<p><strong>ROIè®¡ç®—æ¡†æ¶</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">calculate_agent_roi</span><span class="p">(</span><span class="n">metrics</span><span class="p">):</span>
    <span class="c1"># æ”¶ç›Šéƒ¨åˆ†</span>
    <span class="n">revenue_increase</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;é¢å¤–è®¢å•é‡&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å¹³å‡å®¢å•ä»·&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å¹³å°æŠ½æˆç‡&#39;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å®¢å•ä»·æå‡&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;æ€»è®¢å•é‡&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å¹³å°æŠ½æˆç‡&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">cost_savings</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å®¢æœæˆæœ¬èŠ‚çœ&#39;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;è¿è¥æ•ˆç‡æå‡ä»·å€¼&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># æˆæœ¬éƒ¨åˆ†  </span>
    <span class="n">development_cost</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;ç ”å‘æŠ•å…¥&#39;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;åŸºç¡€è®¾æ–½æˆæœ¬&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">operation_cost</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å¸¦å®½æˆæœ¬å¢åŠ &#39;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;è®¡ç®—èµ„æºæˆæœ¬&#39;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;å®‰å…¨é˜²æŠ¤æˆæœ¬&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># ROIè®¡ç®—</span>
    <span class="n">total_benefit</span> <span class="o">=</span> <span class="n">revenue_increase</span> <span class="o">+</span> <span class="n">cost_savings</span>
    <span class="n">total_cost</span> <span class="o">=</span> <span class="n">development_cost</span> <span class="o">+</span> <span class="n">operation_cost</span>
    <span class="n">roi</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_benefit</span> <span class="o">-</span> <span class="n">total_cost</span><span class="p">)</span> <span class="o">/</span> <span class="n">total_cost</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;ROI&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">roi</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å›æ”¶æœŸ&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">total_cost</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">total_benefit</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">ä¸ªæœˆ&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å¹´åŒ–æ”¶ç›Š&#39;</span><span class="p">:</span> <span class="n">total_benefit</span> <span class="o">-</span> <span class="n">total_cost</span> <span class="o">*</span> <span class="mf">0.15</span>  <span class="c1"># è€ƒè™‘èµ„é‡‘æˆæœ¬</span>
    <span class="p">}</span>
</code></pre></div>

<p><strong>é•¿æœŸæˆ˜ç•¥ä»·å€¼</strong>ï¼š</p>
<p>éšç€AIæŠ€æœ¯çš„å‘å±•ï¼ŒAgentå°†æˆä¸ºç”¨æˆ·ä¸æ•°å­—ä¸–ç•Œäº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å¹³å°å¦‚æœä¸èƒ½å¾ˆå¥½åœ°æœåŠ¡Agentï¼Œå°±å¦‚åŒ20å¹´å‰ä¸æ”¯æŒç§»åŠ¨ç«¯ä¸€æ ·ï¼Œå°†å¤±å»æœªæ¥çš„å…¥å£ã€‚ç¾å›¢é€šè¿‡æ„å»ºAgentå‹å¥½çš„æœåŠ¡ä½“ç³»ï¼Œä¸ä»…è§£å†³å½“ä¸‹çš„ç”¨æˆ·éœ€æ±‚ï¼Œæ›´æ˜¯åœ¨ä¸ºAIåŸç”Ÿçš„æœªæ¥å¸ƒå±€ã€‚</p>
<div class="codehilite"><pre><span></span><code>        ä¼ ç»Ÿäº¤äº’                    Agentæ—¶ä»£
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚            â”‚            â”‚
    â”‚  ç”¨æˆ·â†’ç•Œé¢  â”‚   â”€â”€â”€â”€â–º    â”‚  Agentâ†’API â”‚
    â”‚            â”‚            â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                           â†“
    äººå·¥æ“ä½œä¸ºä¸»                 è‡ªåŠ¨åŒ–ä¸ºä¸»
    åŒæ­¥äº¤äº’                     å¼‚æ­¥åä½œ
    å•ç‚¹æ¥è§¦                     å…¨é“¾è·¯ä»£ç†
</code></pre></div>

<h2 id="112-agent">11.2 Agentèº«ä»½è®¤è¯ä¸ä¿¡ä»»ä½“ç³»</h2>
<p>æ„å»ºå¯é çš„Agentèº«ä»½è®¤è¯å’Œä¿¡ä»»ä½“ç³»æ˜¯å¹³å°å¼€æ”¾æœåŠ¡çš„åŸºç¡€ã€‚ä¸åŒäºä¼ ç»Ÿçš„ç”¨æˆ·è®¤è¯ï¼ŒAgentè®¤è¯éœ€è¦è€ƒè™‘å…¶ä»£ç†æ€§è´¨ã€æŠ€æœ¯èƒ½åŠ›ã€è¡Œä¸ºæ¨¡å¼ç­‰å¤šä¸ªç»´åº¦ã€‚</p>
<h3 id="1121-agent">11.2.1 Agentæ³¨å†Œä¸è®¤è¯æµç¨‹</h3>
<p><strong>å¤šå±‚æ¬¡çš„èº«ä»½ä½“ç³»æ¶æ„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>                    Agentèº«ä»½è®¤è¯ä½“ç³»
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                              â”‚
    â”‚  L0: åŒ¿åAgentï¼ˆæ— éœ€æ³¨å†Œï¼Œä¸¥æ ¼é™åˆ¶ï¼‰           â”‚
    â”‚  L1: åŸºç¡€è®¤è¯ï¼ˆé‚®ç®±éªŒè¯ï¼ŒåŸºç¡€æƒé™ï¼‰           â”‚
    â”‚  L2: å®åè®¤è¯ï¼ˆèº«ä»½éªŒè¯ï¼Œæ ‡å‡†æƒé™ï¼‰           â”‚  
    â”‚  L3: ä¼ä¸šè®¤è¯ï¼ˆèµ„è´¨å®¡æ ¸ï¼Œé«˜çº§æƒé™ï¼‰           â”‚
    â”‚  L4: å¹³å°è®¤è¯ï¼ˆå®˜æ–¹åˆä½œï¼Œç‰¹æƒè®¿é—®ï¼‰           â”‚
    â”‚                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>æ³¨å†Œæµç¨‹è®¾è®¡</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">AgentRegistration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identity_verifier</span> <span class="o">=</span> <span class="n">IdentityVerifier</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capability_assessor</span> <span class="o">=</span> <span class="n">CapabilityAssessor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compliance_checker</span> <span class="o">=</span> <span class="n">ComplianceChecker</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">register_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">application</span><span class="p">):</span>
        <span class="c1"># æ­¥éª¤1ï¼šåŸºç¡€ä¿¡æ¯éªŒè¯</span>
        <span class="n">basic_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;agent_name&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
            <span class="s1">&#39;agent_type&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span>  <span class="c1"># personal/enterprise/platform</span>
            <span class="s1">&#39;purpose&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;purpose&#39;</span><span class="p">],</span>
            <span class="s1">&#39;owner_id&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;owner_id&#39;</span><span class="p">],</span>
            <span class="s1">&#39;technical_spec&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;tech_spec&#39;</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="c1"># æ­¥éª¤2ï¼šèº«ä»½éªŒè¯</span>
        <span class="k">if</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;enterprise&#39;</span><span class="p">:</span>
            <span class="n">cert_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_enterprise_cert</span><span class="p">(</span><span class="n">application</span><span class="p">[</span><span class="s1">&#39;business_license&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cert_result</span><span class="p">[</span><span class="s1">&#39;valid&#39;</span><span class="p">]:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;rejected&#39;</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">:</span> <span class="s1">&#39;ä¼ä¸šèµ„è´¨éªŒè¯å¤±è´¥&#39;</span><span class="p">}</span>

        <span class="c1"># æ­¥éª¤3ï¼šæŠ€æœ¯èƒ½åŠ›è¯„ä¼°</span>
        <span class="n">capability_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capability_assessor</span><span class="o">.</span><span class="n">assess</span><span class="p">({</span>
            <span class="s1">&#39;api_version&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;api_version&#39;</span><span class="p">],</span>
            <span class="s1">&#39;supported_protocols&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;protocols&#39;</span><span class="p">],</span>
            <span class="s1">&#39;rate_limit_compliance&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;rate_limit_test&#39;</span><span class="p">],</span>
            <span class="s1">&#39;error_handling&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;error_handling_test&#39;</span><span class="p">]</span>
        <span class="p">})</span>

        <span class="c1"># æ­¥éª¤4ï¼šåˆè§„æ€§æ£€æŸ¥</span>
        <span class="n">compliance_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compliance_checker</span><span class="o">.</span><span class="n">check</span><span class="p">({</span>
            <span class="s1">&#39;data_usage_policy&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;data_policy&#39;</span><span class="p">],</span>
            <span class="s1">&#39;privacy_statement&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;privacy&#39;</span><span class="p">],</span>
            <span class="s1">&#39;terms_acceptance&#39;</span><span class="p">:</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;terms_accepted&#39;</span><span class="p">]</span>
        <span class="p">})</span>

        <span class="c1"># æ­¥éª¤5ï¼šç”ŸæˆAgentå‡­è¯</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">capability_score</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">compliance_result</span><span class="p">[</span><span class="s1">&#39;passed&#39;</span><span class="p">]]):</span>
            <span class="n">agent_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_agent_id</span><span class="p">(</span><span class="n">basic_info</span><span class="p">)</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">issue_credentials</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="n">application</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;approved&#39;</span><span class="p">,</span>
                <span class="s1">&#39;agent_id&#39;</span><span class="p">:</span> <span class="n">agent_id</span><span class="p">,</span>
                <span class="s1">&#39;api_key&#39;</span><span class="p">:</span> <span class="n">credentials</span><span class="p">[</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                <span class="s1">&#39;secret&#39;</span><span class="p">:</span> <span class="n">credentials</span><span class="p">[</span><span class="s1">&#39;secret&#39;</span><span class="p">],</span>
                <span class="s1">&#39;trust_level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_initial_trust</span><span class="p">(</span><span class="n">application</span><span class="p">),</span>
                <span class="s1">&#39;permissions&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_permissions</span><span class="p">(</span><span class="n">application</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;rejected&#39;</span><span class="p">,</span> <span class="s1">&#39;reasons&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">compile_rejection_reasons</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">generate_agent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
        <span class="c1"># ç”Ÿæˆå…¨å±€å”¯ä¸€çš„Agent ID</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="s1">&#39;agent.meituan.com&#39;</span>
        <span class="n">unique_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;agent_type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;owner_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;agent_name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;agt_</span><span class="si">{</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">unique_string</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()[:</span><span class="mi">16</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<p><strong>å‡­è¯ç®¡ç†æœºåˆ¶</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>å‡­è¯ç±»å‹        ç”¨é€”                  æœ‰æ•ˆæœŸ        åˆ·æ–°æœºåˆ¶
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
API Key     èº«ä»½æ ‡è¯†              æ°¸ä¹…         æ‰‹åŠ¨é‡ç½®
Secret      ç­¾åå¯†é’¥              æ°¸ä¹…         å®šæœŸè½®æ¢
Access Token è®¿é—®ä»¤ç‰Œ             1å°æ—¶        è‡ªåŠ¨åˆ·æ–°
Refresh Token åˆ·æ–°ä»¤ç‰Œ            30å¤©         é‡æ–°è®¤è¯
Session Token ä¼šè¯ä»¤ç‰Œ            15åˆ†é’Ÿ       æ´»åŠ¨å»¶é•¿
</code></pre></div>

<h3 id="1122">11.2.2 ä¿¡ä»»ç­‰çº§è¯„ä¼°æ¨¡å‹</h3>
<p><strong>å¤šç»´åº¦ä¿¡ä»»è¯„åˆ†ä½“ç³»</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TrustScoreModel</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weights</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;identity_verification&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>   <span class="c1"># èº«ä»½è®¤è¯å¼ºåº¦</span>
            <span class="s1">&#39;historical_behavior&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span>     <span class="c1"># å†å²è¡Œä¸ºè¡¨ç°</span>
            <span class="s1">&#39;technical_compliance&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>    <span class="c1"># æŠ€æœ¯è§„èŒƒéµå®ˆ</span>
            <span class="s1">&#39;user_feedback&#39;</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>          <span class="c1"># ç”¨æˆ·åé¦ˆè¯„ä»·</span>
            <span class="s1">&#39;security_incidents&#39;</span><span class="p">:</span> <span class="mf">0.15</span>      <span class="c1"># å®‰å…¨äº‹ä»¶è®°å½•</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">calculate_trust_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">):</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># èº«ä»½è®¤è¯ç»´åº¦</span>
        <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;identity_verification&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_identity_score</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>

        <span class="c1"># å†å²è¡Œä¸ºç»´åº¦</span>
        <span class="n">behavior_metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_behavior_metrics</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;historical_behavior&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_behavior_score</span><span class="p">(</span><span class="n">behavior_metrics</span><span class="p">)</span>

        <span class="c1"># æŠ€æœ¯åˆè§„ç»´åº¦</span>
        <span class="n">compliance_metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_compliance_metrics</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;technical_compliance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_compliance_score</span><span class="p">(</span><span class="n">compliance_metrics</span><span class="p">)</span>

        <span class="c1"># ç”¨æˆ·åé¦ˆç»´åº¦</span>
        <span class="n">feedback_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_feedback</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;user_feedback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_feedback_score</span><span class="p">(</span><span class="n">feedback_data</span><span class="p">)</span>

        <span class="c1"># å®‰å…¨äº‹ä»¶ç»´åº¦</span>
        <span class="n">incident_records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_security_incidents</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;security_incidents&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_security_score</span><span class="p">(</span><span class="n">incident_records</span><span class="p">)</span>

        <span class="c1"># åŠ æƒè®¡ç®—æ€»åˆ†</span>
        <span class="n">total_score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">weights</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;total_score&#39;</span><span class="p">:</span> <span class="n">total_score</span><span class="p">,</span>
            <span class="s1">&#39;dimension_scores&#39;</span><span class="p">:</span> <span class="n">scores</span><span class="p">,</span>
            <span class="s1">&#39;trust_level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_to_level</span><span class="p">(</span><span class="n">total_score</span><span class="p">),</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">calculate_behavior_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metrics</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;åŸºäºå†å²è¡Œä¸ºè®¡ç®—å¾—åˆ†&quot;&quot;&quot;</span>
        <span class="n">factors</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;request_success_rate&#39;</span><span class="p">:</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;success_count&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;total_requests&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;error_rate&#39;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;error_count&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;total_requests&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="s1">&#39;rate_limit_compliance&#39;</span><span class="p">:</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;rate_limit_violations&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;api_usage_pattern&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_usage_pattern</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;api_calls&#39;</span><span class="p">]),</span>
            <span class="s1">&#39;data_access_pattern&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_data_pattern</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;data_access&#39;</span><span class="p">])</span>
        <span class="p">}</span>

        <span class="c1"># å¼‚å¸¸æ£€æµ‹</span>
        <span class="n">anomaly_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_anomalies</span><span class="p">(</span><span class="n">metrics</span><span class="p">)</span>

        <span class="c1"># ç»¼åˆè¯„åˆ†</span>
        <span class="n">behavior_score</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">factors</span><span class="p">[</span><span class="s1">&#39;request_success_rate&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.25</span> <span class="o">+</span>
            <span class="n">factors</span><span class="p">[</span><span class="s1">&#39;error_rate&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.25</span> <span class="o">+</span>
            <span class="n">factors</span><span class="p">[</span><span class="s1">&#39;rate_limit_compliance&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.2</span> <span class="o">+</span>
            <span class="n">factors</span><span class="p">[</span><span class="s1">&#39;api_usage_pattern&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.15</span> <span class="o">+</span>
            <span class="n">factors</span><span class="p">[</span><span class="s1">&#39;data_access_pattern&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.15</span> <span class="o">-</span>
            <span class="n">anomaly_score</span> <span class="o">*</span> <span class="mf">0.3</span>  <span class="c1"># å¼‚å¸¸è¡Œä¸ºæ‰£åˆ†</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">behavior_score</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">score_to_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å°†æ•°å€¼åˆ†æ•°æ˜ å°„åˆ°ä¿¡ä»»ç­‰çº§&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mf">0.9</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;platinum&#39;</span>  <span class="c1"># ç™½é‡‘çº§</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mf">0.75</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;gold&#39;</span>      <span class="c1"># é»„é‡‘çº§</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mf">0.6</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;silver&#39;</span>    <span class="c1"># ç™½é“¶çº§</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mf">0.4</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;bronze&#39;</span>    <span class="c1"># é’é“œçº§</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;restricted&#39;</span> <span class="c1"># å—é™çº§</span>
</code></pre></div>

<p><strong>ä¿¡ä»»ç­‰çº§ä¸æƒé™æ˜ å°„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>ä¿¡ä»»ç­‰çº§    åŸºç¡€é…é¢(QPS)   æ‰¹é‡æ“ä½œ   æ•°æ®è®¿é—®   ç‰¹æ®ŠåŠŸèƒ½
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Platinum      10000         1000æ¡     å®Œæ•´      å®æ—¶æ¨é€
Gold          5000          500æ¡      æ ‡å‡†      WebSocket
Silver        1000          100æ¡      åŸºç¡€      é•¿è½®è¯¢
Bronze        100           20æ¡       å—é™      æ ‡å‡†è½®è¯¢
Restricted    10            ç¦ç”¨       æœ€å°      ä»…æŸ¥è¯¢
</code></pre></div>

<h3 id="1123">11.2.3 åŠ¨æ€ä¿¡ä»»åˆ†è°ƒæ•´æœºåˆ¶</h3>
<p><strong>å®æ—¶è°ƒæ•´ç®—æ³•</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DynamicTrustAdjustment</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjustment_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_adjustment_rules</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">learning_rate</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">momentum</span> <span class="o">=</span> <span class="mf">0.9</span>

    <span class="k">def</span> <span class="nf">adjust_trust_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">current_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_score</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">adjustment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_adjustment</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="c1"># åº”ç”¨åŠ¨é‡å¹³æ»‘</span>
        <span class="n">historical_trend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_historical_trend</span><span class="p">(</span><span class="n">agent_id</span><span class="p">)</span>
        <span class="n">smoothed_adjustment</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">momentum</span> <span class="o">*</span> <span class="n">historical_trend</span> <span class="o">+</span> 
            <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">momentum</span><span class="p">)</span> <span class="o">*</span> <span class="n">adjustment</span>
        <span class="p">)</span>

        <span class="c1"># è®¡ç®—æ–°åˆ†æ•°</span>
        <span class="n">new_score</span> <span class="o">=</span> <span class="n">current_score</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">learning_rate</span> <span class="o">*</span> <span class="n">smoothed_adjustment</span>
        <span class="n">new_score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">new_score</span><span class="p">))</span>  <span class="c1"># é™åˆ¶åœ¨[0,1]èŒƒå›´</span>

        <span class="c1"># è®°å½•è°ƒæ•´å†å²</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_adjustment</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="p">{</span>
            <span class="s1">&#39;event&#39;</span><span class="p">:</span> <span class="n">event</span><span class="p">,</span>
            <span class="s1">&#39;old_score&#39;</span><span class="p">:</span> <span class="n">current_score</span><span class="p">,</span>
            <span class="s1">&#39;new_score&#39;</span><span class="p">:</span> <span class="n">new_score</span><span class="p">,</span>
            <span class="s1">&#39;adjustment&#39;</span><span class="p">:</span> <span class="n">adjustment</span><span class="p">,</span>
            <span class="s1">&#39;reason&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_adjustment_reason</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="p">})</span>

        <span class="c1"># è§¦å‘çº§åˆ«å˜æ›´é€šçŸ¥</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">level_changed</span><span class="p">(</span><span class="n">current_score</span><span class="p">,</span> <span class="n">new_score</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notify_level_change</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="n">new_score</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_score</span>

    <span class="k">def</span> <span class="nf">calculate_adjustment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;æ ¹æ®äº‹ä»¶ç±»å‹è®¡ç®—ä¿¡ä»»åˆ†è°ƒæ•´å€¼&quot;&quot;&quot;</span>
        <span class="n">adjustments</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># æ­£å‘äº‹ä»¶</span>
            <span class="s1">&#39;successful_transaction&#39;</span><span class="p">:</span> <span class="o">+</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="s1">&#39;positive_user_feedback&#39;</span><span class="p">:</span> <span class="o">+</span><span class="mf">0.02</span><span class="p">,</span>
            <span class="s1">&#39;security_contribution&#39;</span><span class="p">:</span> <span class="o">+</span><span class="mf">0.05</span><span class="p">,</span>    <span class="c1"># æŠ¥å‘Šæ¼æ´ç­‰</span>
            <span class="s1">&#39;consistent_good_behavior&#39;</span><span class="p">:</span> <span class="o">+</span><span class="mf">0.03</span><span class="p">,</span>

            <span class="c1"># è´Ÿå‘äº‹ä»¶</span>
            <span class="s1">&#39;rate_limit_violation&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span>
            <span class="s1">&#39;api_abuse_detected&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.10</span><span class="p">,</span>
            <span class="s1">&#39;user_complaint&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">,</span>
            <span class="s1">&#39;security_incident&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.20</span><span class="p">,</span>
            <span class="s1">&#39;data_breach_attempt&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.50</span><span class="p">,</span>

            <span class="c1"># ä¸­æ€§äº‹ä»¶</span>
            <span class="s1">&#39;normal_operation&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;maintenance_period&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>

        <span class="n">base_adjustment</span> <span class="o">=</span> <span class="n">adjustments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># è€ƒè™‘äº‹ä»¶ä¸¥é‡ç¨‹åº¦</span>
        <span class="n">severity_multiplier</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;severity&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1"># è€ƒè™‘æ—¶é—´è¡°å‡ï¼ˆrecent events have more impactï¼‰</span>
        <span class="n">time_decay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_time_decay</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">base_adjustment</span> <span class="o">*</span> <span class="n">severity_multiplier</span> <span class="o">*</span> <span class="n">time_decay</span>

    <span class="k">def</span> <span class="nf">emergency_trust_freeze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">,</span> <span class="n">reason</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ç´§æ€¥å†»ç»“ä¿¡ä»»åˆ†&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_agent_status</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="s1">&#39;frozen&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trust_score</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notify_security_team</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_security_event</span><span class="p">(</span><span class="n">agent_id</span><span class="p">,</span> <span class="s1">&#39;trust_freeze&#39;</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
</code></pre></div>

<h3 id="1124">11.2.4 è·¨å¹³å°èº«ä»½äº’è®¤</h3>
<p><strong>è”é‚¦èº«ä»½è®¤è¯æ¶æ„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>         ç¾å›¢å¹³å°                    ç¬¬ä¸‰æ–¹å¹³å°
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚            â”‚              â”‚
    â”‚  Agentè®¤è¯   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  OAuth 2.0   â”‚
    â”‚   ä¸­å¿ƒ       â”‚            â”‚   Provider   â”‚
    â”‚              â”‚            â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                            â”‚
           â–¼                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ä¿¡ä»»æ˜ å°„   â”‚            â”‚   ä¿¡èª‰å…±äº«   â”‚
    â”‚    è§„åˆ™      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    åè®®      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p><strong>è·¨å¹³å°ä¿¡ä»»æ˜ å°„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CrossPlatformTrustMapper</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">platform_mappings</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;google&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">:</span> <span class="s1">&#39;oauth2.googleapis.com&#39;</span><span class="p">},</span>
            <span class="s1">&#39;microsoft&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">:</span> <span class="s1">&#39;login.microsoftonline.com&#39;</span><span class="p">},</span>
            <span class="s1">&#39;github&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">:</span> <span class="s1">&#39;github.com/login/oauth&#39;</span><span class="p">},</span>
            <span class="s1">&#39;wechat&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">:</span> <span class="s1">&#39;open.weixin.qq.com&#39;</span><span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">import_external_trust</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">external_identity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å¯¼å…¥å¤–éƒ¨å¹³å°çš„ä¿¡ä»»å‡­è¯&quot;&quot;&quot;</span>
        <span class="n">platform</span> <span class="o">=</span> <span class="n">external_identity</span><span class="p">[</span><span class="s1">&#39;platform&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">platform</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">platform_mappings</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># éªŒè¯å¤–éƒ¨èº«ä»½</span>
        <span class="n">verification_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_external_identity</span><span class="p">(</span>
            <span class="n">platform</span><span class="p">,</span>
            <span class="n">external_identity</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">verification_result</span><span class="p">[</span><span class="s1">&#39;valid&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># è·å–å¤–éƒ¨ä¿¡èª‰æ•°æ®</span>
        <span class="n">external_reputation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_external_reputation</span><span class="p">(</span>
            <span class="n">platform</span><span class="p">,</span>
            <span class="n">external_identity</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># è½¬æ¢ä¸ºå†…éƒ¨ä¿¡ä»»åˆ†</span>
        <span class="n">internal_trust</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_internal_trust</span><span class="p">(</span>
            <span class="n">platform</span><span class="p">,</span>
            <span class="n">external_reputation</span>
        <span class="p">)</span>

        <span class="c1"># åˆ›å»ºå…³è”è®°å½•</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_identity_link</span><span class="p">({</span>
            <span class="s1">&#39;internal_agent_id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_internal_id</span><span class="p">(),</span>
            <span class="s1">&#39;external_platform&#39;</span><span class="p">:</span> <span class="n">platform</span><span class="p">,</span>
            <span class="s1">&#39;external_id&#39;</span><span class="p">:</span> <span class="n">external_identity</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">],</span>
            <span class="s1">&#39;trust_score&#39;</span><span class="p">:</span> <span class="n">internal_trust</span><span class="p">,</span>
            <span class="s1">&#39;verification_time&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
            <span class="s1">&#39;expiry&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
        <span class="p">})</span>

        <span class="k">return</span> <span class="n">internal_trust</span>

    <span class="k">def</span> <span class="nf">convert_to_internal_trust</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">external_rep</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;å°†å¤–éƒ¨ä¿¡èª‰è½¬æ¢ä¸ºå†…éƒ¨ä¿¡ä»»åˆ†&quot;&quot;&quot;</span>
        <span class="n">platform_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">platform_mappings</span><span class="p">[</span><span class="n">platform</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>

        <span class="c1"># æ ‡å‡†åŒ–å¤–éƒ¨åˆ†æ•°</span>
        <span class="n">normalized_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize_external_score</span><span class="p">(</span><span class="n">platform</span><span class="p">,</span> <span class="n">external_rep</span><span class="p">)</span>

        <span class="c1"># åº”ç”¨å¹³å°æƒé‡</span>
        <span class="n">weighted_score</span> <span class="o">=</span> <span class="n">normalized_score</span> <span class="o">*</span> <span class="n">platform_weight</span>

        <span class="c1"># åº”ç”¨åˆå§‹æŠ˜æ‰£ï¼ˆæ–°å¯¼å…¥çš„ä¿¡ä»»éœ€è¦æœ¬åœ°éªŒè¯ï¼‰</span>
        <span class="n">initial_discount</span> <span class="o">=</span> <span class="mf">0.8</span>

        <span class="k">return</span> <span class="n">weighted_score</span> <span class="o">*</span> <span class="n">initial_discount</span>
</code></pre></div>

<p><strong>å»ä¸­å¿ƒåŒ–èº«ä»½ï¼ˆDIDï¼‰æ”¯æŒ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DIDIntegration</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">did_resolver</span> <span class="o">=</span> <span class="n">DIDResolver</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifiable_credentials</span> <span class="o">=</span> <span class="n">VCVerifier</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">verify_did_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">did_document</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;éªŒè¯åŸºäºDIDçš„Agentèº«ä»½&quot;&quot;&quot;</span>
        <span class="c1"># è§£æDID</span>
        <span class="n">did</span> <span class="o">=</span> <span class="n">did_document</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>  <span class="c1"># å¦‚: did:meituan:agent:12345</span>

        <span class="c1"># éªŒè¯DIDæ–‡æ¡£ç­¾å</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_signature</span><span class="p">(</span><span class="n">did_document</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;valid&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">:</span> <span class="s1">&#39;ç­¾åéªŒè¯å¤±è´¥&#39;</span><span class="p">}</span>

        <span class="c1"># éªŒè¯å¯éªŒè¯å‡­è¯</span>
        <span class="n">credentials</span> <span class="o">=</span> <span class="n">did_document</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;verifiableCredential&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">verified_claims</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">credential</span> <span class="ow">in</span> <span class="n">credentials</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verifiable_credentials</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">credential</span><span class="p">):</span>
                <span class="n">verified_claims</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">credential</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;issuer&#39;</span><span class="p">:</span> <span class="n">credential</span><span class="p">[</span><span class="s1">&#39;issuer&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;claims&#39;</span><span class="p">:</span> <span class="n">credential</span><span class="p">[</span><span class="s1">&#39;credentialSubject&#39;</span><span class="p">]</span>
                <span class="p">})</span>

        <span class="c1"># æ„å»ºä¿¡ä»»æ¡£æ¡ˆ</span>
        <span class="n">trust_profile</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;did&#39;</span><span class="p">:</span> <span class="n">did</span><span class="p">,</span>
            <span class="s1">&#39;verified_claims&#39;</span><span class="p">:</span> <span class="n">verified_claims</span><span class="p">,</span>
            <span class="s1">&#39;trust_score&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_did_trust</span><span class="p">(</span><span class="n">verified_claims</span><span class="p">),</span>
            <span class="s1">&#39;capabilities&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_capabilities</span><span class="p">(</span><span class="n">verified_claims</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;valid&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;profile&#39;</span><span class="p">:</span> <span class="n">trust_profile</span><span class="p">}</span>
</code></pre></div>

<h2 id="113-agent">11.3 å–„æ„Agentä¸æ¶æ„æœºå™¨äººçš„åŒºåˆ†</h2>
<h3 id="1131">11.3.1 è¡Œä¸ºæ¨¡å¼ç‰¹å¾åˆ†æ</h3>
<h3 id="1132">11.3.2 æ„å›¾è¯†åˆ«ä¸åˆ†ç±»</h3>
<h3 id="1133">11.3.3 å¤šç»´åº¦ç»¼åˆè¯„åˆ¤</h3>
<h3 id="1134">11.3.4 è¯¯åˆ¤å¤„ç†ä¸ç”³è¯‰æœºåˆ¶</h3>
<h2 id="114-api">11.4 APIé€Ÿç‡é™åˆ¶çš„æ™ºèƒ½åŒ–è°ƒæ•´</h2>
<h3 id="1141">11.4.1 åŸºç¡€é™æµç­–ç•¥è®¾è®¡</h3>
<h3 id="1142">11.4.2 ä¿¡ä»»åº¦å…³è”çš„åŠ¨æ€é…é¢</h3>
<h3 id="1143">11.4.3 ä¸šåŠ¡åœºæ™¯çš„å·®å¼‚åŒ–é™åˆ¶</h3>
<h3 id="1144">11.4.4 çªå‘æµé‡çš„å¼¹æ€§å¤„ç†</h3>
<h2 id="115-agent">11.5 Agentå‹å¥½çš„æ¥å£è®¾è®¡</h2>
<h3 id="1151">11.5.1 æ ‡å‡†åŒ–åè®®æ”¯æŒ</h3>
<h3 id="1152">11.5.2 æ‰¹é‡æ“ä½œæ¥å£ä¼˜åŒ–</h3>
<h3 id="1153">11.5.3 é•¿è¿æ¥ä¸è®¢é˜…æœºåˆ¶</h3>
<h3 id="1154">11.5.4 é”™è¯¯å¤„ç†ä¸é‡è¯•ç­–ç•¥</h3>
<h2 id="116">11.6 ç”¨æˆ·æˆæƒä¸ä»£ç†æœºåˆ¶</h2>
<h3 id="1161-oauth-20">11.6.1 OAuth 2.0æˆæƒæ¡†æ¶å®ç°</h3>
<h3 id="1162">11.6.2 æƒé™ç²’åº¦æ§åˆ¶</h3>
<h3 id="1163">11.6.3 æˆæƒæœ‰æ•ˆæœŸç®¡ç†</h3>
<h3 id="1164">11.6.4 å®¡è®¡æ—¥å¿—ä¸è¿½æº¯</h3>
<h2 id="117">11.7 åˆè§„æ€§æ¡†æ¶ä¸éšç§ä¿æŠ¤</h2>
<h3 id="1171">11.7.1 æ•°æ®æœ€å°åŒ–åŸåˆ™</h3>
<h3 id="1172">11.7.2 ç”¨æˆ·çŸ¥æƒ…æƒä¿éšœ</h3>
<h3 id="1173">11.7.3 æ•°æ®å®‰å…¨ä¼ è¾“ä¸å­˜å‚¨</h3>
<h3 id="1174">11.7.4 è·¨å¢ƒæ•°æ®æµåŠ¨åˆè§„</h3>
<h2 id="118-agent">11.8 Agentç”Ÿæ€çš„åŸ¹è‚²ä¸æ²»ç†</h2>
<h3 id="1181">11.8.1 å¼€å‘è€…æ¿€åŠ±æœºåˆ¶</h3>
<h3 id="1182">11.8.2 è´¨é‡è®¤è¯ä½“ç³»</h3>
<h3 id="1183">11.8.3 è¿è§„è¡Œä¸ºå¤„ç½š</h3>
<h3 id="1184">11.8.4 ç¤¾åŒºå…±å»ºä¸åé¦ˆ</h3>
<h2 id="_3">æœ¬ç« å°ç»“</h2>
<h2 id="_4">ç»ƒä¹ é¢˜</h2>
<h2 id="gotchas">å¸¸è§é™·é˜±ä¸é”™è¯¯ï¼ˆGotchasï¼‰</h2>
            </article>
            
            <nav class="page-nav"><a href="chapter10.html" class="nav-link prev">â† ç¬¬10ç« ï¼šåæœºå™¨äººæ»¥ç”¨ä¸è¯„è®ºçœŸå®æ€§ä¿éšœ</a><a href="CLAUDE.html" class="nav-link next">1) å›¾çµç®—æ³•å¹³å°ï¼ˆç®—æ³•åŸºç¡€è®¾æ–½ï¼‰ â†’</a></nav>
        </main>
    </div>
</body>
</html>