<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>ç¬¬4ç« ï¼šè°ƒåº¦å¼•æ“ - å®æ—¶å¤šäººå¤šç‚¹åˆ†é…</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¾å›¢è¶…è„‘ç³»ç»Ÿå¤ç°æ•™ç¨‹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬1ç« ï¼šå›¾çµç®—æ³•å¹³å°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬2ç« ï¼šå¤§è§„æ¨¡ç‰¹å¾è®¡ç®—</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬3ç« ï¼šæœºå™¨å­¦ä¹ å¹³å°</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬4ç« ï¼šè°ƒåº¦å¼•æ“ - å®æ—¶å¤šäººå¤šç‚¹åˆ†é…</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬5ç« ï¼šè§„åˆ’å¼•æ“ï¼ˆç½‘ç»œ/ç«™ç‚¹/è¿åŠ›ç»“æ„è§„åˆ’ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬6ç« ï¼šETAç³»ç»Ÿ - å…¨é“¾è·¯æ—¶é—´é¢„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬7ç« ï¼šLBSç³»ç»Ÿï¼ˆåœ°å›¾/åœ°å€åº“/è·¯å¾„è§„åˆ’ï¼‰</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬8ç« ï¼šå®šä»·ç³»ç»Ÿ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¬¬9ç« ï¼šç²¾å‡†è¥é”€ä¸ä¼šå‘˜ä½“ç³»</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">1) å›¾çµç®—æ³•å¹³å°ï¼ˆç®—æ³•åŸºç¡€è®¾æ–½ï¼‰</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="4-">ç¬¬4ç« ï¼šè°ƒåº¦å¼•æ“ - å®æ—¶å¤šäººå¤šç‚¹åˆ†é…</h1>
<p>è°ƒåº¦å¼•æ“æ˜¯ç¾å›¢è¶…è„‘ç³»ç»Ÿçš„å†³ç­–æ ¸å¿ƒï¼Œè´Ÿè´£åœ¨ç§’çº§æ—¶é—´å†…å®Œæˆ"è°æ¥é€ã€æ€ä¹ˆé€ã€ä½•æ—¶é€"çš„å®æ—¶å†³ç­–ã€‚æœ¬ç« å°†æ·±å…¥å‰–æå¦‚ä½•åœ¨åŸå¸‚çº§ç½‘ç»œå†…å®ç°å…¨å±€æŸ”æ€§è°ƒåº¦ï¼Œå¤„ç†æ¯ç§’æ•°ä¸‡è®¢å•çš„ç»„åˆçˆ†ç‚¸é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡è¿ç­¹ä¼˜åŒ–ä¸æœºå™¨å­¦ä¹ çš„æ·±åº¦èåˆå®ç°ç³»ç»Ÿæ•ˆç‡æœ€å¤§åŒ–ã€‚</p>
<h2 id="41">4.1 è°ƒåº¦é—®é¢˜çš„æœ¬è´¨ä¸æŒ‘æˆ˜</h2>
<h3 id="411">4.1.1 é—®é¢˜å®šä¹‰</h3>
<p>å¤–å–è°ƒåº¦æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>åŠ¨æ€çš„å¤šäººå¤šç‚¹å–é€é—®é¢˜ï¼ˆDynamic Multi-Pickup Multi-Delivery Problemï¼‰</strong>ï¼Œå…¶æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºï¼š</p>
<div class="codehilite"><pre><span></span><code>è¾“å…¥ï¼š

- O = {oâ‚, oâ‚‚, ..., oâ‚™}ï¼šå®æ—¶äº§ç”Ÿçš„è®¢å•é›†åˆ
- R = {râ‚, râ‚‚, ..., râ‚˜}ï¼šåœ¨çº¿éª‘æ‰‹é›†åˆ
- G = (V, E)ï¼šåŸå¸‚è·¯ç½‘å›¾
- Tï¼šæ—¶é—´çº¦æŸçŸ©é˜µ

è¾“å‡ºï¼š

- Aï¼šè®¢å•-éª‘æ‰‹åˆ†é…æ–¹æ¡ˆ
- Pï¼šæ¯ä¸ªéª‘æ‰‹çš„é…é€è·¯å¾„
- Sï¼šæ‰§è¡Œæ—¶é—´åºåˆ—

ç›®æ ‡ï¼š

- min: æ€»é…é€æˆæœ¬
- max: å‡†æ—¶ç‡
- balance: éª‘æ‰‹è´Ÿè½½å‡è¡¡
</code></pre></div>

<h3 id="412">4.1.2 è§„æ¨¡ä¸å¤æ‚åº¦</h3>
<p>ç¾å›¢å¤–å–çš„è°ƒåº¦è§„æ¨¡å‘ˆç°ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<div class="codehilite"><pre><span></span><code>åŸå¸‚çº§è§„æ¨¡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å³°å€¼å¹¶å‘è®¢å•ï¼š    10,000+/ç§’        â”‚
â”‚ åŒæ—¶åœ¨çº¿éª‘æ‰‹ï¼š    100,000+          â”‚
â”‚ å•†å®¶æ•°é‡ï¼š        500,000+          â”‚
â”‚ é…é€èŒƒå›´ï¼š        3-5å…¬é‡Œ           â”‚
â”‚ å†³ç­–æ—¶é—´çª—å£ï¼š    &lt;100ms            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»„åˆå¤æ‚åº¦ï¼š

- 100è®¢å• Ã— 200éª‘æ‰‹ = 200^100 ç§åˆ†é…æ–¹æ¡ˆ
- æ¯ä¸ªéª‘æ‰‹10ä¸ªä»»åŠ¡ç‚¹çš„è·¯å¾„è§„åˆ’ = 10! = 3,628,800 ç§
- æ€»æœç´¢ç©ºé—´ &gt; 10^230
</code></pre></div>

<h3 id="413">4.1.3 çº¦æŸæ¡ä»¶</h3>
<p>è°ƒåº¦å†³ç­–éœ€è¦æ»¡è¶³å¤šé‡çº¦æŸï¼š</p>
<ol>
<li>
<p><strong>æ—¶é—´çº¦æŸ</strong>ï¼š
   - æ‰¿è¯ºé€è¾¾æ—¶é—´ï¼ˆPromise Timeï¼‰
   - å•†å®¶å‡ºé¤æ—¶é—´ï¼ˆReady Timeï¼‰
   - éª‘æ‰‹å·¥ä½œæ—¶é•¿é™åˆ¶</p>
</li>
<li>
<p><strong>å®¹é‡çº¦æŸ</strong>ï¼š
   - éª‘æ‰‹é…é€ç®±å®¹é‡ï¼ˆä½“ç§¯/é‡é‡ï¼‰
   - åŒæ—¶é…é€è®¢å•æ•°ä¸Šé™ï¼ˆé€šå¸¸3-5å•ï¼‰</p>
</li>
<li>
<p><strong>åœ°ç†çº¦æŸ</strong>ï¼š
   - é…é€èŒƒå›´é™åˆ¶
   - äº¤é€šç®¡åˆ¶åŒºåŸŸ
   - æ¶åŠ£å¤©æ°”ç¦è¡ŒåŒº</p>
</li>
<li>
<p><strong>ä¸šåŠ¡çº¦æŸ</strong>ï¼š
   - ä¼˜å…ˆçº§è®¢å•ï¼ˆä¼šå‘˜/åŠ æ€¥ï¼‰
   - ç‹¬ç«‹é…é€è¦æ±‚ï¼ˆå¦‚è›‹ç³•ï¼‰
   - éª‘æ‰‹æŠ€èƒ½åŒ¹é…ï¼ˆå¦‚éœ€è¦å¥åº·è¯ï¼‰</p>
</li>
</ol>
<h2 id="42">4.2 è°ƒåº¦ç®—æ³•æ¶æ„</h2>
<h3 id="421">4.2.1 åˆ†å±‚å†³ç­–æ¡†æ¶</h3>
<p>ç¾å›¢è°ƒåº¦é‡‡ç”¨<strong>åˆ†å±‚å†³ç­–</strong>æ¶æ„ï¼Œå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼š</p>
<div class="codehilite"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å…¨å±€è°ƒåº¦å™¨                      â”‚
â”‚            (Global Scheduler)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼           â–¼           â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åŒºåŸŸè°ƒåº¦ â”‚ â”‚åŒºåŸŸè°ƒåº¦ â”‚ â”‚åŒºåŸŸè°ƒåº¦ â”‚ â”‚åŒºåŸŸè°ƒåº¦ â”‚
â”‚(Zone 1) â”‚ â”‚(Zone 2) â”‚ â”‚(Zone 3) â”‚ â”‚(Zone N) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚           â”‚
     â–¼           â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å±€éƒ¨ä¼˜åŒ–å™¨                        â”‚
â”‚     (æ‰¹é‡åˆ†é…ã€è·¯å¾„è§„åˆ’ã€æ—¶åºä¼˜åŒ–)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="422">4.2.2 æ ¸å¿ƒç®—æ³•æ¨¡å—</h3>
<h4 id="1">1. è®¢å•èšåˆä¸æ‰¹å¤„ç†</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ä¼ªä»£ç ï¼šè®¢å•æ‰¹å¤„ç†é€»è¾‘</span>
<span class="k">class</span> <span class="nc">OrderBatcher</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">batch_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">time_window</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        å°†æ—¶é—´çª—å£å†…çš„è®¢å•èšåˆæˆæ‰¹æ¬¡</span>

<span class="sd">        å…³é”®å‚æ•°ï¼š</span>

<span class="sd">        - time_window: èšåˆæ—¶é—´çª—å£ï¼ˆç§’ï¼‰</span>
<span class="sd">        - min_batch_size: æœ€å°æ‰¹æ¬¡å¤§å°</span>
<span class="sd">        - max_batch_size: æœ€å¤§æ‰¹æ¬¡å¤§å°</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">batches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">current_batch</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">should_batch</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">current_batch</span><span class="p">):</span>
                <span class="n">current_batch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">current_batch</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">batches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_batch</span><span class="p">)</span>
                <span class="n">current_batch</span> <span class="o">=</span> <span class="p">[</span><span class="n">order</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">batches</span>
</code></pre></div>

<h4 id="2-">2. éª‘æ‰‹-è®¢å•åŒ¹é…è¯„åˆ†</h4>
<p>åŒ¹é…è¯„åˆ†ç»¼åˆè€ƒè™‘å¤šä¸ªç»´åº¦ï¼š</p>
<div class="codehilite"><pre><span></span><code>Score(rider, order) = wâ‚Â·è·ç¦»å› å­ + wâ‚‚Â·æ—¶é—´å› å­ + 
                      wâ‚ƒÂ·è´Ÿè½½å› å­ + wâ‚„Â·è·¯å¾„å› å­ + 
                      wâ‚…Â·å†å²å› å­

å…¶ä¸­ï¼š

<span class="k">-</span> è·ç¦»å› å­ = 1 / (1 + distance_to_merchant)
<span class="k">-</span> æ—¶é—´å› å­ = remaining_time / promise_time
<span class="k">-</span> è´Ÿè½½å› å­ = 1 - current_orders / max_capacity
<span class="k">-</span> è·¯å¾„å› å­ = path_efficiency_score
<span class="k">-</span> å†å²å› å­ = historical_performance_score
</code></pre></div>

<h4 id="3">3. ç»„åˆä¼˜åŒ–æ±‚è§£å™¨</h4>
<h5 id="_1">åŒˆç‰™åˆ©ç®—æ³•ï¼ˆå°è§„æ¨¡ç²¾ç¡®æ±‚è§£ï¼‰</h5>
<div class="codehilite"><pre><span></span><code><span class="c1"># ç”¨äºå°è§„æ¨¡è®¢å•-éª‘æ‰‹ç²¾ç¡®åŒ¹é…</span>
<span class="k">def</span> <span class="nf">hungarian_assignment</span><span class="p">(</span><span class="n">cost_matrix</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    è¾“å…¥ï¼šcost_matrix[i][j] = éª‘æ‰‹ié…é€è®¢å•jçš„æˆæœ¬</span>
<span class="sd">    è¾“å‡ºï¼šæœ€ä¼˜åˆ†é…æ–¹æ¡ˆ</span>
<span class="sd">    æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ³)</span>
<span class="sd">    é€‚ç”¨è§„æ¨¡ï¼šn &lt; 100</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>

<h5 id="_2">å¯å‘å¼ç®—æ³•ï¼ˆå¤§è§„æ¨¡è¿‘ä¼¼æ±‚è§£ï¼‰</h5>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">GreedyDispatcher</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">riders</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è´ªå¿ƒè°ƒåº¦ç®—æ³•</span>

<span class="sd">        ç­–ç•¥ï¼š</span>

<span class="sd">        1. æŒ‰è®¢å•ç´§æ€¥åº¦æ’åº</span>
<span class="sd">        2. ä¸ºæ¯ä¸ªè®¢å•é€‰æ‹©æœ€ä¼˜éª‘æ‰‹</span>
<span class="sd">        3. å¢é‡å¼æ›´æ–°éª‘æ‰‹çŠ¶æ€</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sorted_orders</span> <span class="o">=</span> <span class="n">sort_by_urgency</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
        <span class="n">assignments</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">sorted_orders</span><span class="p">:</span>
            <span class="n">best_rider</span> <span class="o">=</span> <span class="n">find_best_rider</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">riders</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">best_rider</span><span class="p">:</span>
                <span class="n">assignments</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">order</span><span class="p">,</span> <span class="n">best_rider</span><span class="p">))</span>
                <span class="n">update_rider_state</span><span class="p">(</span><span class="n">best_rider</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">assignments</span>
</code></pre></div>

<h3 id="423">4.2.3 è·¯å¾„è§„åˆ’ä¸æ—¶åºä¼˜åŒ–</h3>
<p>é…é€è·¯å¾„ä¸ä»…è¦è€ƒè™‘è·ç¦»æœ€çŸ­ï¼Œè¿˜è¦è€ƒè™‘æ—¶é—´çª—å£çº¦æŸï¼š</p>
<div class="codehilite"><pre><span></span><code>è·¯å¾„ä¼˜åŒ–é—®é¢˜ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         éª‘æ‰‹å½“å‰ä½ç½® (R)                â”‚
â”‚              â†“                          â”‚
â”‚    å•†å®¶1 â†’ å•†å®¶2 â†’ å•†å®¶3                â”‚
â”‚     â†“       â†“       â†“                  â”‚
â”‚    ç”¨æˆ·A   ç”¨æˆ·B   ç”¨æˆ·C                â”‚
â”‚                                         â”‚
â”‚ çº¦æŸï¼š                                  â”‚
â”‚ - å…ˆå–åé€                             â”‚
â”‚ - å‡ºé¤æ—¶é—´çª—å£                         â”‚
â”‚ - é€è¾¾æ—¶é—´çª—å£                         â”‚
â”‚ - å®¹é‡é™åˆ¶                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<p>åŠ¨æ€è§„åˆ’æ±‚è§£ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">optimize_delivery_sequence</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">constraints</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä½¿ç”¨åŠ¨æ€è§„åˆ’ä¼˜åŒ–é…é€åºåˆ—</span>

<span class="sd">    çŠ¶æ€å®šä¹‰ï¼š</span>
<span class="sd">    dp[mask][last] = å®Œæˆmaskä¸­ä»»åŠ¡ï¼Œæœ€åè®¿é—®lastçš„æœ€å°æˆæœ¬</span>

<span class="sd">    è½¬ç§»æ–¹ç¨‹ï¼š</span>
<span class="sd">    dp[mask|1&lt;&lt;j][j] = min(dp[mask][i] + cost(i,j))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
    <span class="n">dp</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="n">n</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">)]</span>

    <span class="c1"># åˆå§‹åŒ–å’ŒçŠ¶æ€è½¬ç§»...</span>

    <span class="k">return</span> <span class="n">extract_optimal_path</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</code></pre></div>

<h2 id="43">4.3 å®æ—¶è°ƒåº¦å¼•æ“å®ç°</h2>
<h3 id="431">4.3.1 ç³»ç»Ÿæ¶æ„</h3>
<div class="codehilite"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è°ƒåº¦å¼•æ“æ¶æ„                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ è®¢å•æ¥å…¥å±‚   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”¤ éª‘æ‰‹çŠ¶æ€å±‚   â”‚         â”‚
â”‚  â”‚ (Kafka)      â”‚        â”‚ (Redis)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                        â”‚                  â”‚
â”‚         â–¼                        â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚        è°ƒåº¦å†³ç­–å±‚                   â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚           â”‚
â”‚  â”‚  â”‚é¢„åˆ†é…    â”‚  â”‚å…¨å±€ä¼˜åŒ–  â”‚       â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚           â”‚
â”‚  â”‚  â”‚è·¯å¾„è§„åˆ’  â”‚  â”‚è´Ÿè½½å‡è¡¡  â”‚       â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                   â”‚                                â”‚
â”‚                   â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚        æ‰§è¡Œä¸åé¦ˆå±‚                 â”‚           â”‚
â”‚  â”‚  (æ¨é€æŒ‡ä»¤ã€çŠ¶æ€æ›´æ–°ã€æ•ˆæœå›æµ)     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>

<h3 id="432">4.3.2 å…³é”®æŠ€æœ¯ç‚¹</h3>
<h4 id="1_1">1. é¢„åˆ†é…æœºåˆ¶</h4>
<p>ä¸ºäº†å‡å°‘å†³ç­–å»¶è¿Ÿï¼Œç³»ç»Ÿé‡‡ç”¨é¢„åˆ†é…ç­–ç•¥ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">PreAllocator</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">pre_allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è®¢å•åˆ›å»ºæ—¶çš„é¢„åˆ†é…</span>

<span class="sd">        ä¼˜åŠ¿ï¼š</span>

<span class="sd">        - å‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´</span>
<span class="sd">        - æå‰é”å®šè¿åŠ›</span>
<span class="sd">        - ä¸ºåç»­ä¼˜åŒ–ç•™å‡ºæ—¶é—´</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># å¿«é€Ÿç­›é€‰å€™é€‰éª‘æ‰‹</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_nearby_riders</span><span class="p">(</span>
            <span class="n">order</span><span class="o">.</span><span class="n">merchant_location</span><span class="p">,</span>
            <span class="n">radius</span><span class="o">=</span><span class="mi">1000</span>  <span class="c1"># 1kmèŒƒå›´</span>
        <span class="p">)</span>

        <span class="c1"># ç®€å•è¯„åˆ†</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rider</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quick_score</span><span class="p">(</span><span class="n">rider</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
            <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rider</span><span class="p">,</span> <span class="n">score</span><span class="p">))</span>

        <span class="c1"># è¿”å›æœ€ä¼˜çš„3ä¸ªå€™é€‰</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">scores</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div>

<h4 id="2">2. å¢é‡å¼ä¼˜åŒ–</h4>
<p>ç³»ç»Ÿé‡‡ç”¨å¢é‡å¼ä¼˜åŒ–ç­–ç•¥ï¼Œé¿å…å…¨å±€é‡æ–°è®¡ç®—ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">IncrementalOptimizer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">optimize_incremental</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_order</span><span class="p">,</span> <span class="n">current_plan</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        å¢é‡å¼è°ƒåº¦ä¼˜åŒ–</span>

<span class="sd">        åŸç†ï¼š</span>

<span class="sd">        - ä¿æŒå¤§éƒ¨åˆ†ç°æœ‰åˆ†é…ä¸å˜</span>
<span class="sd">        - ä»…è°ƒæ•´å—å½±å“çš„å±€éƒ¨</span>
<span class="sd">        - å¿«é€Ÿæ”¶æ•›åˆ°æ¬¡ä¼˜è§£</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">affected_riders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_affected_riders</span><span class="p">(</span>
            <span class="n">new_order</span><span class="p">,</span> 
            <span class="n">current_plan</span>
        <span class="p">)</span>

        <span class="c1"># ä»…é‡æ–°ä¼˜åŒ–å—å½±å“çš„éƒ¨åˆ†</span>
        <span class="n">local_solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">local_search</span><span class="p">(</span>
            <span class="n">new_order</span><span class="p">,</span>
            <span class="n">affected_riders</span><span class="p">,</span>
            <span class="n">current_plan</span>
        <span class="p">)</span>

        <span class="c1"># åˆå¹¶åˆ°å…¨å±€æ–¹æ¡ˆ</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_solution</span><span class="p">(</span><span class="n">current_plan</span><span class="p">,</span> <span class="n">local_solution</span><span class="p">)</span>
</code></pre></div>

<h4 id="3_1">3. å¹¶å‘æ§åˆ¶ä¸ä¸€è‡´æ€§</h4>
<p>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œéœ€è¦carefulå¤„ç†å¹¶å‘å†²çªï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ConcurrentDispatcher</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">dispatch_with_lock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">rider</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ä½¿ç”¨åˆ†å¸ƒå¼é”ä¿è¯ä¸€è‡´æ€§</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lock_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;rider_lock:</span><span class="si">{</span><span class="n">rider</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">with</span> <span class="n">distributed_lock</span><span class="p">(</span><span class="n">lock_key</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
            <span class="c1"># æ£€æŸ¥éª‘æ‰‹å½“å‰çŠ¶æ€</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_assign</span><span class="p">(</span><span class="n">rider</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="c1"># æ‰§è¡Œåˆ†é…</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_order_to_rider</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">rider</span><span class="p">)</span>

            <span class="c1"># æ›´æ–°çŠ¶æ€</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_rider_capacity</span><span class="p">(</span><span class="n">rider</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h2 id="44">4.4 æœºå™¨å­¦ä¹ ä¸å¼ºåŒ–å­¦ä¹ åº”ç”¨</h2>
<h3 id="441">4.4.1 æ·±åº¦å­¦ä¹ é¢„æµ‹æ¨¡å‹</h3>
<p>ç”¨æ·±åº¦å­¦ä¹ é¢„æµ‹å…³é”®æŒ‡æ ‡ï¼Œè¾…åŠ©è°ƒåº¦å†³ç­–ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DeliveryTimePredictor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    é…é€æ—¶é—´é¢„æµ‹æ¨¡å‹</span>

<span class="sd">    è¾“å…¥ç‰¹å¾ï¼š</span>

<span class="sd">    - è®¢å•ç‰¹å¾ï¼šè·ç¦»ã€å“ç±»ã€é‡‘é¢ã€å¤‡æ³¨</span>
<span class="sd">    - éª‘æ‰‹ç‰¹å¾ï¼šå†å²é€Ÿåº¦ã€å½“å‰è´Ÿè½½ã€ç–²åŠ³åº¦</span>
<span class="sd">    - ç¯å¢ƒç‰¹å¾ï¼šå¤©æ°”ã€æ—¶æ®µã€è·¯å†µ</span>
<span class="sd">    - å•†å®¶ç‰¹å¾ï¼šå‡ºé¤é€Ÿåº¦ã€æ’é˜Ÿæƒ…å†µ</span>

<span class="sd">    è¾“å‡ºï¼š</span>

<span class="sd">    - é¢„è®¡é…é€æ—¶é•¿</span>
<span class="sd">    - å»¶è¿Ÿé£é™©æ¦‚ç‡</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">build_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ç‰¹å¾åµŒå…¥å±‚</span>
        <span class="n">order_embedding</span> <span class="o">=</span> <span class="n">Embedding</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">rider_embedding</span> <span class="o">=</span> <span class="n">Embedding</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

        <span class="c1"># ç‰¹å¾äº¤å‰</span>
        <span class="n">cross_features</span> <span class="o">=</span> <span class="n">CrossLayer</span><span class="p">(</span>
            <span class="p">[</span><span class="n">order_embedding</span><span class="p">,</span> <span class="n">rider_embedding</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># æ·±åº¦ç½‘ç»œ</span>
        <span class="n">hidden</span> <span class="o">=</span> <span class="n">Dense</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;relu&#39;</span><span class="p">)(</span><span class="n">cross_features</span><span class="p">)</span>
        <span class="n">hidden</span> <span class="o">=</span> <span class="n">Dense</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;relu&#39;</span><span class="p">)(</span><span class="n">hidden</span><span class="p">)</span>

        <span class="c1"># è¾“å‡ºå±‚</span>
        <span class="n">delivery_time</span> <span class="o">=</span> <span class="n">Dense</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)(</span><span class="n">hidden</span><span class="p">)</span>
        <span class="n">delay_risk</span> <span class="o">=</span> <span class="n">Dense</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">activation</span><span class="o">=</span><span class="s1">&#39;sigmoid&#39;</span><span class="p">)(</span><span class="n">hidden</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Model</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</code></pre></div>

<h3 id="442">4.4.2 å¼ºåŒ–å­¦ä¹ è°ƒåº¦ç­–ç•¥</h3>
<p>ä½¿ç”¨å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–é•¿æœŸæ”¶ç›Šï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RLDispatcher</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    åŸºäºå¼ºåŒ–å­¦ä¹ çš„è°ƒåº¦å™¨</span>

<span class="sd">    çŠ¶æ€ç©ºé—´ï¼š</span>

<span class="sd">    - åŒºåŸŸè®¢å•åˆ†å¸ƒ</span>
<span class="sd">    - éª‘æ‰‹åˆ†å¸ƒä¸çŠ¶æ€</span>
<span class="sd">    - å†å²é…é€æ•ˆç‡</span>

<span class="sd">    åŠ¨ä½œç©ºé—´ï¼š</span>

<span class="sd">    - è®¢å•åˆ†é…å†³ç­–</span>
<span class="sd">    - éª‘æ‰‹è°ƒåº¦å†³ç­–</span>

<span class="sd">    å¥–åŠ±å‡½æ•°ï¼š</span>

<span class="sd">    - å³æ—¶å¥–åŠ±ï¼šå‡†æ—¶ç‡ã€æ•ˆç‡</span>
<span class="sd">    - é•¿æœŸå¥–åŠ±ï¼šåŒºåŸŸå¹³è¡¡ã€éª‘æ‰‹æ»¡æ„åº¦</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">define_reward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">next_state</span><span class="p">):</span>
        <span class="n">immediate_reward</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_time_rate</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">efficiency_score</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delay_penalty</span> <span class="o">*</span> <span class="mi">20</span>
        <span class="p">)</span>

        <span class="n">future_reward</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">region_balance_score</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rider_utilization</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">immediate_reward</span> <span class="o">+</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">future_reward</span>

<span class="c1">## 4.5 å®æ—¶æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯</span>

<span class="c1">### 4.5.1 å»¶è¿Ÿä¼˜åŒ–ç­–ç•¥</span>

<span class="n">ä¸ºäº†è¾¾åˆ°100msä»¥å†…çš„å†³ç­–å»¶è¿Ÿ</span><span class="err">ï¼Œ</span><span class="n">ç³»ç»Ÿé‡‡ç”¨å¤šç§ä¼˜åŒ–æŠ€æœ¯</span><span class="err">ï¼š</span>

<span class="c1">#### 1. è®¡ç®—å¹¶è¡ŒåŒ–</span>
</code></pre></div>

<p>å¹¶è¡ŒåŒ–æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è®¢å•è¯·æ±‚ (T=0ms)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼         â–¼         â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ç‰¹å¾è®¡ç®—â”‚â”‚ETAé¢„ä¼° â”‚â”‚éª‘æ‰‹ç­›é€‰â”‚â”‚è·¯å¾„è§„åˆ’â”‚
â”‚(15ms)  â”‚â”‚(20ms)  â”‚â”‚(10ms)  â”‚â”‚(25ms)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚         â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚å†³ç­–èåˆ â”‚ (T=70ms)
         â”‚(10ms)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
         æœ€ç»ˆå†³ç­– (T=80ms)</p>
<div class="codehilite"><pre><span></span><code><span class="gu">##</span>## 2. ç¼“å­˜ç­–ç•¥

å¤šçº§ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—ï¼š

```python
class MultiLevelCache:
    def __init__(self):
        # L1: è¿›ç¨‹å†…ç¼“å­˜ (æœ€å¿«ï¼Œå®¹é‡å°)
        self.l1_cache = LRUCache(capacity=10000)

        # L2: Redisç¼“å­˜ (å¿«ï¼Œå®¹é‡ä¸­)
        self.l2_cache = RedisCache(
            max_memory=&quot;2GB&quot;,
            eviction_policy=&quot;allkeys-lru&quot;
        )

        # L3: åˆ†å¸ƒå¼ç¼“å­˜ (è¾ƒæ…¢ï¼Œå®¹é‡å¤§)
        self.l3_cache = DistributedCache(
            nodes=[&quot;cache1:11211&quot;, &quot;cache2:11211&quot;]
        )

    def get_with_fallback(self, key):
        # é€çº§æŸ¥æ‰¾
        value = self.l1_cache.get(key)
        if value:
            return value

        value = self.l2_cache.get(key)
        if value:
            self.l1_cache.set(key, value)
            return value

        value = self.l3_cache.get(key)
        if value:
            self.l2_cache.set(key, value)
            self.l1_cache.set(key, value)
            return value

        return None
</code></pre></div>

<h4 id="3_2">3. é¢„è®¡ç®—ä¸ç´¢å¼•</h4>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">SpatialIndex</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ç©ºé—´ç´¢å¼•åŠ é€Ÿéª‘æ‰‹æŸ¥æ‰¾</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># æ„å»ºR-treeç´¢å¼•</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rtree</span> <span class="o">=</span> <span class="n">Rtree</span><span class="p">()</span>

        <span class="c1"># ç½‘æ ¼ç´¢å¼• (å¤‡ç”¨)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span> <span class="o">=</span> <span class="n">GridIndex</span><span class="p">(</span>
            <span class="n">cell_size</span><span class="o">=</span><span class="mi">500</span>  <span class="c1"># 500ç±³ç½‘æ ¼</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_nearby_riders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="c1"># ä½¿ç”¨R-treeå¿«é€ŸæŸ¥æ‰¾</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">location</span><span class="o">.</span><span class="n">lng</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span>
            <span class="n">location</span><span class="o">.</span><span class="n">lat</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span>
            <span class="n">location</span><span class="o">.</span><span class="n">lng</span> <span class="o">+</span> <span class="n">radius</span><span class="p">,</span>
            <span class="n">location</span><span class="o">.</span><span class="n">lat</span> <span class="o">+</span> <span class="n">radius</span>
        <span class="p">)</span>

        <span class="n">candidates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rtree</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="c1"># ç²¾ç¡®è¿‡æ»¤</span>
        <span class="n">nearby_riders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rider_id</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="n">rider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rider</span><span class="p">(</span><span class="n">rider_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">distance</span><span class="p">(</span><span class="n">rider</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">radius</span><span class="p">:</span>
                <span class="n">nearby_riders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rider</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nearby_riders</span>
</code></pre></div>

<h3 id="452">4.5.2 é™çº§ä¸ç†”æ–­æœºåˆ¶</h3>
<p>åœ¨æç«¯é«˜å³°æœŸï¼Œç³»ç»Ÿéœ€è¦ä¼˜é›…é™çº§ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DegradationStrategy</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_threshold</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;normal&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>
            <span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span>
            <span class="s1">&#39;critical&#39;</span><span class="p">:</span> <span class="mf">0.95</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_load</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">current_load</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_threshold</span><span class="p">[</span><span class="s1">&#39;normal&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal_strategy</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">current_load</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_threshold</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">degraded_strategy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emergency_strategy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">normal_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;algorithm&#39;</span><span class="p">:</span> <span class="s1">&#39;optimal&#39;</span><span class="p">,</span>
            <span class="s1">&#39;search_radius&#39;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="s1">&#39;max_candidates&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="s1">&#39;enable_rebalance&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">degraded_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;algorithm&#39;</span><span class="p">:</span> <span class="s1">&#39;greedy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;search_radius&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="s1">&#39;max_candidates&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
            <span class="s1">&#39;enable_rebalance&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">emergency_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;algorithm&#39;</span><span class="p">:</span> <span class="s1">&#39;nearest&#39;</span><span class="p">,</span>
            <span class="s1">&#39;search_radius&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="s1">&#39;max_candidates&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s1">&#39;enable_rebalance&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
</code></pre></div>

<h2 id="46">4.6 è´Ÿè½½å‡è¡¡ä¸å…¬å¹³æ€§</h2>
<h3 id="461">4.6.1 éª‘æ‰‹è´Ÿè½½å‡è¡¡</h3>
<p>ç¡®ä¿éª‘æ‰‹å·¥ä½œé‡åˆç†åˆ†é…ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">LoadBalancer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">calculate_rider_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rider</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è®¡ç®—éª‘æ‰‹è´Ÿè½½åˆ†æ•°</span>

<span class="sd">        è€ƒè™‘å› ç´ ï¼š</span>

<span class="sd">        - å½“å‰è®¢å•æ•°</span>
<span class="sd">        - ç´¯è®¡é…é€è·ç¦»</span>
<span class="sd">        - å·¥ä½œæ—¶é•¿</span>
<span class="sd">        - æ”¶å…¥æ°´å¹³</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">load_score</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">rider</span><span class="o">.</span><span class="n">current_orders</span> <span class="o">/</span> <span class="n">rider</span><span class="o">.</span><span class="n">max_capacity</span> <span class="o">*</span> <span class="mf">0.3</span> <span class="o">+</span>
            <span class="n">rider</span><span class="o">.</span><span class="n">total_distance</span> <span class="o">/</span> <span class="n">AVG_DISTANCE</span> <span class="o">*</span> <span class="mf">0.2</span> <span class="o">+</span>
            <span class="n">rider</span><span class="o">.</span><span class="n">working_hours</span> <span class="o">/</span> <span class="n">MAX_HOURS</span> <span class="o">*</span> <span class="mf">0.3</span> <span class="o">+</span>
            <span class="p">(</span><span class="n">TARGET_INCOME</span> <span class="o">-</span> <span class="n">rider</span><span class="o">.</span><span class="n">income</span><span class="p">)</span> <span class="o">/</span> <span class="n">TARGET_INCOME</span> <span class="o">*</span> <span class="mf">0.2</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">load_score</span>

    <span class="k">def</span> <span class="nf">balance_assignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">riders</span><span class="p">):</span>
        <span class="c1"># è®¡ç®—æ‰€æœ‰éª‘æ‰‹è´Ÿè½½</span>
        <span class="n">loads</span> <span class="o">=</span> <span class="p">{</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_rider_load</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> 
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">riders</span><span class="p">}</span>

        <span class="c1"># ä¼˜å…ˆåˆ†é…ç»™ä½è´Ÿè½½éª‘æ‰‹</span>
        <span class="n">sorted_riders</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
            <span class="n">riders</span><span class="p">,</span> 
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">loads</span><span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="n">assignments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
            <span class="c1"># é€‰æ‹©è´Ÿè½½æœ€ä½çš„åˆé€‚éª‘æ‰‹</span>
            <span class="k">for</span> <span class="n">rider</span> <span class="ow">in</span> <span class="n">sorted_riders</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_assign</span><span class="p">(</span><span class="n">rider</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
                    <span class="n">assignments</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">order</span><span class="p">,</span> <span class="n">rider</span><span class="p">))</span>
                    <span class="c1"># æ›´æ–°è´Ÿè½½</span>
                    <span class="n">loads</span><span class="p">[</span><span class="n">rider</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_load</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">assignments</span>
</code></pre></div>

<h3 id="462">4.6.2 åŒºåŸŸé—´åè°ƒ</h3>
<p>é˜²æ­¢å±€éƒ¨è¿‡çƒ­æˆ–è¿‡å†·ï¼š</p>
<div class="codehilite"><pre><span></span><code>åŒºåŸŸçƒ­åŠ›å›¾ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â– â– â–  â–¡â–¡â–¡ â– â– â–¡ â–¡â–¡â–¡  (â– é«˜è´Ÿè½½)     â”‚
â”‚  â– â– â–  â–¡â–¡â–¡ â– â– â–¡ â–¡â–¡â–¡  (â–¡ä½è´Ÿè½½)     â”‚
â”‚  â–¡â–¡â–¡ â– â– â–  â–¡â–¡â–¡ â– â– â–¡               â”‚
â”‚  â–¡â–¡â–¡ â– â– â–  â–¡â–¡â–¡ â– â– â–¡               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

è°ƒåº¦ç­–ç•¥ï¼š

- è·¨åŒºåŸŸè°ƒåº¦
- åŠ¨æ€è¾¹ç•Œè°ƒæ•´
- é¢„æµ‹æ€§è¿åŠ›è°ƒé…
</code></pre></div>

<h2 id="47">4.7 ç›‘æ§ä¸è°ƒä¼˜</h2>
<h3 id="471">4.7.1 å…³é”®æŒ‡æ ‡ä½“ç³»</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DispatchMetrics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    è°ƒåº¦ç³»ç»Ÿæ ¸å¿ƒæŒ‡æ ‡</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># æ•ˆç‡æŒ‡æ ‡</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;å¹³å‡å“åº”æ—¶é—´&#39;</span><span class="p">:</span> <span class="s1">&#39;p50, p95, p99&#39;</span><span class="p">,</span>
        <span class="s1">&#39;è®¢å•åˆ†é…æˆåŠŸç‡&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 99.9%&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å¹³å‡é…é€æ—¶é•¿&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt; 30åˆ†é’Ÿ&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å‡†æ—¶ç‡&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 95%&#39;</span><span class="p">,</span>

        <span class="c1"># è´¨é‡æŒ‡æ ‡</span>
        <span class="s1">&#39;éª‘æ‰‹åˆ©ç”¨ç‡&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 80%&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ç©ºé©¶ç‡&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt; 20%&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å•å‡é…é€æˆæœ¬&#39;</span><span class="p">:</span> <span class="s1">&#39;æŒç»­ä¼˜åŒ–&#39;</span><span class="p">,</span>

        <span class="c1"># ä½“éªŒæŒ‡æ ‡</span>
        <span class="s1">&#39;ç”¨æˆ·æ»¡æ„åº¦&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 4.8/5&#39;</span><span class="p">,</span>
        <span class="s1">&#39;éª‘æ‰‹æ»¡æ„åº¦&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 4.5/5&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å•†å®¶æ»¡æ„åº¦&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 4.6/5&#39;</span><span class="p">,</span>

        <span class="c1"># ç³»ç»ŸæŒ‡æ ‡</span>
        <span class="s1">&#39;QPS&#39;</span><span class="p">:</span> <span class="s1">&#39;å³°å€¼ &gt; 10000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å»¶è¿Ÿ&#39;</span><span class="p">:</span> <span class="s1">&#39;P99 &lt; 100ms&#39;</span><span class="p">,</span>
        <span class="s1">&#39;å¯ç”¨æ€§&#39;</span><span class="p">:</span> <span class="s1">&#39;&gt; 99.99%&#39;</span>
    <span class="p">}</span>
</code></pre></div>

<h3 id="472-ab">4.7.2 A/Bæµ‹è¯•æ¡†æ¶</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DispatchABTest</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">run_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strategy_a</span><span class="p">,</span> <span class="n">strategy_b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        è°ƒåº¦ç­–ç•¥A/Bæµ‹è¯•</span>

<span class="sd">        åˆ†æµè§„åˆ™ï¼š</span>

<span class="sd">        - æŒ‰åŒºåŸŸåˆ†æµ</span>
<span class="sd">        - æŒ‰æ—¶æ®µåˆ†æµ</span>
<span class="sd">        - æŒ‰è®¢å•ç‰¹å¾åˆ†æµ</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># å®éªŒé…ç½®</span>
        <span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;7 days&#39;</span><span class="p">,</span>
            <span class="s1">&#39;traffic_split&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;min_sample_size&#39;</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span>
            <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;on_time_rate&#39;</span><span class="p">,</span> <span class="s1">&#39;efficiency&#39;</span><span class="p">,</span> <span class="s1">&#39;cost&#39;</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="c1"># æ‰§è¡Œå®éªŒ</span>
        <span class="n">results_a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">results_b</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">order_stream</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_use_strategy_a</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">strategy_a</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
                <span class="n">results_a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">strategy_b</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
                <span class="n">results_b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="c1"># ç»Ÿè®¡åˆ†æ</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_results</span><span class="p">(</span><span class="n">results_a</span><span class="p">,</span> <span class="n">results_b</span><span class="p">)</span>
</code></pre></div>

<h2 id="48">4.8 è¾¹ç¼˜åœºæ™¯ä¸å¼‚å¸¸å¤„ç†</h2>
<h3 id="481">4.8.1 æç«¯å¤©æ°”åº”å¯¹</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WeatherAdaptiveDispatcher</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    æ¶åŠ£å¤©æ°”è‡ªé€‚åº”è°ƒåº¦</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">adjust_for_weather</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weather_condition</span><span class="p">):</span>
        <span class="n">adjustments</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;heavy_rain&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;delivery_time_buffer&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
                <span class="s1">&#39;max_orders_per_rider&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s1">&#39;search_radius&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
                <span class="s1">&#39;safety_bonus&#39;</span><span class="p">:</span> <span class="mi">5</span>
            <span class="p">},</span>
            <span class="s1">&#39;typhoon&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;delivery_time_buffer&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
                <span class="s1">&#39;max_orders_per_rider&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="s1">&#39;search_radius&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                <span class="s1">&#39;safety_bonus&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                <span class="s1">&#39;suspend_zones&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_danger_zones</span><span class="p">()</span>
            <span class="p">},</span>
            <span class="s1">&#39;high_temperature&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;delivery_time_buffer&#39;</span><span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
                <span class="s1">&#39;break_frequency&#39;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
                <span class="s1">&#39;hydration_reminder&#39;</span><span class="p">:</span> <span class="kc">True</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">adjustments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">weather_condition</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">def</span> <span class="nf">emergency_dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
        <span class="c1"># ä¼˜å…ˆå®‰å…¨æ€§</span>
        <span class="n">safe_riders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_safe_riders</span><span class="p">(</span><span class="n">weather</span><span class="p">)</span>

        <span class="c1"># ç¼©çŸ­é…é€é“¾è·¯</span>
        <span class="n">nearby_riders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_nearby_riders</span><span class="p">(</span>
            <span class="n">order</span><span class="o">.</span><span class="n">merchant</span><span class="p">,</span>
            <span class="n">radius</span><span class="o">=</span><span class="mi">1000</span>  <span class="c1"># ç¼©å°èŒƒå›´</span>
        <span class="p">)</span>

        <span class="c1"># é™ä½è´Ÿè½½</span>
        <span class="n">available</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">nearby_riders</span> 
                    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">current_orders</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_with_safety_priority</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">available</span><span class="p">)</span>
</code></pre></div>

<h3 id="482">4.8.2 éª‘æ‰‹å¼‚å¸¸å¤„ç†</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RiderAnomalyHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    éª‘æ‰‹å¼‚å¸¸çŠ¶æ€å¤„ç†</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">handle_rider_offline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rider</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        éª‘æ‰‹æ„å¤–ç¦»çº¿å¤„ç†</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># è·å–æœªå®Œæˆè®¢å•</span>
        <span class="n">pending_orders</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pending_orders</span><span class="p">(</span><span class="n">rider</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pending_orders</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># ç´§æ€¥é‡æ–°åˆ†é…</span>
        <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">pending_orders</span><span class="p">:</span>
            <span class="c1"># è®¡ç®—ç´§æ€¥åº¦</span>
            <span class="n">urgency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_urgency</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

            <span class="c1"># å¯»æ‰¾æ›¿ä»£éª‘æ‰‹</span>
            <span class="n">replacement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_emergency_replacement</span><span class="p">(</span>
                <span class="n">order</span><span class="p">,</span>
                <span class="n">urgency_level</span><span class="o">=</span><span class="n">urgency</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">replacement</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">emergency_reassign</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">replacement</span><span class="p">)</span>
                <span class="c1"># è¡¥å¿æœºåˆ¶</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">apply_compensation</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">rider</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># å‡çº§å¤„ç†</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">escalate_to_customer_service</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">detect_abnormal_behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rider</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        æ£€æµ‹å¼‚å¸¸è¡Œä¸ºæ¨¡å¼</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indicators</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;speed_anomaly&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_speed_pattern</span><span class="p">(</span><span class="n">rider</span><span class="p">),</span>
            <span class="s1">&#39;location_jump&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_location_consistency</span><span class="p">(</span><span class="n">rider</span><span class="p">),</span>
            <span class="s1">&#39;order_rejection_rate&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_rejection_pattern</span><span class="p">(</span><span class="n">rider</span><span class="p">),</span>
            <span class="s1">&#39;device_anomaly&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_device_status</span><span class="p">(</span><span class="n">rider</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="n">risk_score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">indicators</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">indicators</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">risk_score</span> <span class="o">&gt;</span> <span class="mf">0.7</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trigger_intervention</span><span class="p">(</span><span class="n">rider</span><span class="p">,</span> <span class="n">indicators</span><span class="p">)</span>
</code></pre></div>

<h3 id="483">4.8.3 è®¢å•å¼‚å¸¸å¤„ç†</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">OrderAnomalyHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    è®¢å•å¼‚å¸¸å¤„ç†</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">handle_merchant_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        å•†å®¶å‡ºé¤å»¶è¿Ÿå¤„ç†</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_delay</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">delay</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># å»¶è¿Ÿè¶…è¿‡10åˆ†é’Ÿ</span>
            <span class="c1"># é€šçŸ¥éª‘æ‰‹è°ƒæ•´å–é¤æ—¶é—´</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notify_rider_delay</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">rider</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>

            <span class="c1"># é‡æ–°ä¼˜åŒ–è·¯å¾„</span>
            <span class="n">new_sequence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reoptimize_path</span><span class="p">(</span>
                <span class="n">order</span><span class="o">.</span><span class="n">rider</span><span class="p">,</span>
                <span class="n">delay_constraint</span><span class="o">=</span><span class="n">delay</span>
            <span class="p">)</span>

            <span class="c1"># æ›´æ–°é¢„è®¡é€è¾¾æ—¶é—´</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_eta</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>

            <span class="c1"># ä¸»åŠ¨é€šçŸ¥ç”¨æˆ·</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notify_customer</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_address_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        åœ°å€é”™è¯¯å¤„ç†</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># æ™ºèƒ½åœ°å€çº æ­£</span>
        <span class="n">corrected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">smart_address_correction</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">corrected</span><span class="o">.</span><span class="n">confidence</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_address</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">corrected</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># è”ç³»ç”¨æˆ·ç¡®è®¤</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request_address_confirmation</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</code></pre></div>

<h2 id="49">4.9 æœªæ¥æ¼”è¿›æ–¹å‘</h2>
<h3 id="491">4.9.1 æ™ºèƒ½åŒ–å‡çº§</h3>
<div class="codehilite"><pre><span></span><code>æ¼”è¿›è·¯çº¿å›¾ï¼š

2024 Q1-Q2: åŸºç¡€AIèƒ½åŠ›å»ºè®¾
â”œâ”€â”€ LLMè¾…åŠ©è°ƒåº¦å†³ç­–
â”œâ”€â”€ å¤šæ™ºèƒ½ä½“ååŒæ¡†æ¶
â””â”€â”€ è‡ªç„¶è¯­è¨€äº¤äº’ç•Œé¢

2024 Q3-Q4: æ·±åº¦å­¦ä¹ ä¼˜åŒ–
â”œâ”€â”€ ç«¯åˆ°ç«¯æ·±åº¦å¼ºåŒ–å­¦ä¹ 
â”œâ”€â”€ å›¾ç¥ç»ç½‘ç»œå»ºæ¨¡
â””â”€â”€ ç”Ÿæˆå¼è°ƒåº¦ç­–ç•¥

2025: è‡ªä¸»åŒ–è°ƒåº¦
â”œâ”€â”€ è‡ªé€‚åº”ç®—æ³•é€‰æ‹©
â”œâ”€â”€ è‡ªåŠ¨å‚æ•°è°ƒä¼˜
â””â”€â”€ æ™ºèƒ½å¼‚å¸¸é¢„æµ‹ä¸å¤„ç†
</code></pre></div>

<h3 id="492">4.9.2 æŠ€æœ¯åˆ›æ–°æ–¹å‘</h3>
<ol>
<li>
<p><strong>è”é‚¦å­¦ä¹ åº”ç”¨</strong>
   - ä¿æŠ¤éšç§çš„åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒ
   - è·¨åŸå¸‚ç»éªŒå…±äº«
   - ä¸ªæ€§åŒ–è°ƒåº¦ç­–ç•¥</p>
</li>
<li>
<p><strong>æ•°å­—å­ªç”Ÿç³»ç»Ÿ</strong>
   - åŸå¸‚çº§é…é€ç½‘ç»œä»¿çœŸ
   - ç­–ç•¥é¢„æ¼”ä¸è¯„ä¼°
   - æç«¯åœºæ™¯å‹åŠ›æµ‹è¯•</p>
</li>
<li>
<p><strong>é‡å­è®¡ç®—æ¢ç´¢</strong>
   - é‡å­é€€ç«è§£å†³ç»„åˆä¼˜åŒ–
   - é‡å­æœºå™¨å­¦ä¹ åŠ é€Ÿ
   - è¶…å¤§è§„æ¨¡é—®é¢˜æ±‚è§£</p>
</li>
</ol>
<h2 id="_3">æœ¬ç« å°ç»“</h2>
<p>è°ƒåº¦å¼•æ“ä½œä¸ºç¾å›¢è¶…è„‘ç³»ç»Ÿçš„å†³ç­–æ ¸å¿ƒï¼Œå±•ç°äº†è¿ç­¹ä¼˜åŒ–ä¸æœºå™¨å­¦ä¹ æ·±åº¦èåˆçš„å¨åŠ›ã€‚é€šè¿‡åˆ†å±‚å†³ç­–ã€å®æ—¶ä¼˜åŒ–ã€æ™ºèƒ½é¢„æµ‹ç­‰æŠ€æœ¯æ‰‹æ®µï¼Œç³»ç»Ÿèƒ½å¤Ÿåœ¨ç§’çº§æ—¶é—´å†…å®ŒæˆåŸå¸‚çº§è§„æ¨¡çš„è®¢å•åˆ†é…ï¼Œå®ç°äº†æ•ˆç‡ã€æˆæœ¬ã€ä½“éªŒçš„å¤šç›®æ ‡å¹³è¡¡ã€‚</p>
<h3 id="_4">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>é—®é¢˜æœ¬è´¨</strong>ï¼šåŠ¨æ€å¤šäººå¤šç‚¹å–é€é—®é¢˜ï¼Œå…·æœ‰ç»„åˆçˆ†ç‚¸ç‰¹æ€§</li>
<li><strong>ç®—æ³•æ¶æ„</strong>ï¼šåˆ†å±‚å†³ç­–æ¡†æ¶ï¼Œå…¨å±€ä¼˜åŒ–ä¸å±€éƒ¨æœç´¢ç»“åˆ</li>
<li>
<p><strong>å…³é”®æŠ€æœ¯</strong>ï¼š
   - æ‰¹å¤„ç†ä¸é¢„åˆ†é…å‡å°‘å»¶è¿Ÿ
   - å¤šçº§ç¼“å­˜ä¸ç©ºé—´ç´¢å¼•åŠ é€ŸæŸ¥è¯¢
   - å¯å‘å¼ç®—æ³•å¤„ç†å¤§è§„æ¨¡é—®é¢˜
   - æ·±åº¦å­¦ä¹ é¢„æµ‹è¾…åŠ©å†³ç­–
   - å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–é•¿æœŸæ”¶ç›Š</p>
</li>
<li>
<p><strong>å·¥ç¨‹å®è·µ</strong>ï¼š
   - å¹¶è¡Œè®¡ç®—æ¶æ„
   - é™çº§ç†”æ–­æœºåˆ¶
   - è´Ÿè½½å‡è¡¡ç­–ç•¥
   - å®æ—¶ç›‘æ§ä½“ç³»</p>
</li>
<li>
<p><strong>æœªæ¥æ–¹å‘</strong>ï¼šæ™ºèƒ½åŒ–ã€è‡ªä¸»åŒ–ã€é‡å­åŒ–</p>
</li>
</ol>
<h3 id="_5">å…³é”®å…¬å¼æ€»ç»“</h3>
<ol>
<li><strong>åŒ¹é…è¯„åˆ†å‡½æ•°</strong>ï¼š</li>
</ol>
<div class="codehilite"><pre><span></span><code>Score(r,o) = Î£ wáµ¢ Ã— fáµ¢(r,o)
</code></pre></div>

<ol start="2">
<li>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š
   - ç²¾ç¡®ç®—æ³•ï¼šO(nÂ³)
   - å¯å‘å¼ç®—æ³•ï¼šO(nÂ²)
   - å®æ—¶è¦æ±‚ï¼š&lt; 100ms</p>
</li>
<li>
<p><strong>ä¼˜åŒ–ç›®æ ‡</strong>ï¼š</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nb">min</span><span class="w"> </span><span class="err">Î£</span><span class="w"> </span><span class="n">cost</span><span class="p">(</span><span class="n">ráµ¢</span><span class="p">,</span><span class="n">oâ±¼</span><span class="p">)</span><span class="w"> </span>
<span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="o">.</span><span class="w"> </span><span class="n">capacity</span><span class="p">,</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">geographic</span><span class="w"> </span><span class="n">constraints</span>
</code></pre></div>

<h2 id="_6">ç»ƒä¹ é¢˜</h2>
<h3 id="_7">åŸºç¡€é¢˜</h3>
<h4 id="1_2">é¢˜ç›®1ï¼šè®¢å•æ‰¹å¤„ç†ä¼˜åŒ–</h4>
<p>è®¾è®¡ä¸€ä¸ªè®¢å•æ‰¹å¤„ç†ç®—æ³•ï¼Œåœ¨2ç§’æ—¶é—´çª—å£å†…èšåˆè®¢å•ï¼Œè¦æ±‚ï¼š</p>
<ul>
<li>æœ€å°æ‰¹æ¬¡å¤§å°ä¸º5å•</li>
<li>æœ€å¤§æ‰¹æ¬¡å¤§å°ä¸º20å•</li>
<li>ç›¸ä¼¼å•†åœˆçš„è®¢å•ä¼˜å…ˆèšåˆ</li>
</ul>
<details>
<summary>Hint</summary>
<p>è€ƒè™‘ä½¿ç”¨æ»‘åŠ¨çª—å£å’Œåœ°ç†èšç±»ç›¸ç»“åˆçš„æ–¹æ³•ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p>ä½¿ç”¨æ—¶é—´-ç©ºé—´åŒç»´åº¦èšåˆç­–ç•¥ï¼š</p>
<ol>
<li>ç»´æŠ¤2ç§’æ»‘åŠ¨çª—å£æ”¶é›†è®¢å•</li>
<li>ä½¿ç”¨DBSCANå¯¹è®¢å•è¿›è¡Œåœ°ç†èšç±»</li>
<li>ä¼˜å…ˆå°†åŒä¸€èšç±»å†…çš„è®¢å•æ‰“åŒ…</li>
<li>å½“è¾¾åˆ°æœ€å°æ‰¹æ¬¡è¦æ±‚æˆ–çª—å£ç»“æŸæ—¶è¾“å‡ºæ‰¹æ¬¡</li>
<li>æ³¨æ„å¤„ç†ç´§æ€¥è®¢å•çš„ä¼˜å…ˆçº§</li>
</ol>
<p>å…³é”®æ˜¯å¹³è¡¡æ‰¹å¤„ç†æ•ˆç‡å’Œå“åº”å»¶è¿Ÿã€‚</p>
</details>
<h4 id="2_1">é¢˜ç›®2ï¼šéª‘æ‰‹ç­›é€‰ä¼˜åŒ–</h4>
<p>ç»™å®š1000ä¸ªåœ¨çº¿éª‘æ‰‹å’Œ1ä¸ªæ–°è®¢å•ï¼Œè®¾è®¡å¿«é€Ÿç­›é€‰ç®—æ³•æ‰¾å‡ºæœ€ä¼˜çš„10ä¸ªå€™é€‰éª‘æ‰‹ï¼Œæ—¶é—´å¤æ‚åº¦è¦æ±‚O(n)ã€‚</p>
<details>
<summary>Hint</summary>
<p>ä½¿ç”¨ç©ºé—´ç´¢å¼•å’Œå¯å‘å¼è¯„åˆ†ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<ol>
<li>é¢„æ„å»ºç½‘æ ¼ç´¢å¼•ï¼Œå°†éª‘æ‰‹æŒ‰ä½ç½®åˆ†é…åˆ°ç½‘æ ¼</li>
<li>æ ¹æ®è®¢å•ä½ç½®å®šä½ç›¸é‚»ç½‘æ ¼ï¼ˆO(1)ï¼‰</li>
<li>ä»è¿‘åˆ°è¿œæ‰©å±•ç½‘æ ¼æœç´¢</li>
<li>å¯¹æ¯ä¸ªç½‘æ ¼å†…éª‘æ‰‹è®¡ç®—ç®€å•è¯„åˆ†</li>
<li>ä½¿ç”¨æœ€å°å †ç»´æŠ¤Top-10å€™é€‰</li>
<li>è¾¾åˆ°10ä¸ªå€™é€‰æˆ–æœç´¢åŠå¾„è¶…é™æ—¶åœæ­¢</li>
</ol>
<p>å…³é”®ä¼˜åŒ–ï¼šé¢„è®¡ç®—+ç´¢å¼•+æ—©åœã€‚</p>
</details>
<h4 id="3_3">é¢˜ç›®3ï¼šè·¯å¾„è§„åˆ’ç®€åŒ–</h4>
<p>éª‘æ‰‹å½“å‰æœ‰3ä¸ªå¾…å–é¤å•†å®¶å’Œ3ä¸ªå¾…é€è¾¾ç”¨æˆ·ï¼Œè®¾è®¡ç®—æ³•è§„åˆ’æœ€ä¼˜é…é€é¡ºåºï¼Œæ»¡è¶³"å…ˆå–åé€"çº¦æŸã€‚</p>
<details>
<summary>Hint</summary>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¦çº¦æŸçš„TSPé—®é¢˜å˜ç§ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p>ä½¿ç”¨ä¸¤é˜¶æ®µä¼˜åŒ–ï¼š</p>
<ol>
<li>é˜¶æ®µ1ï¼šç¡®å®šå–é¤é¡ºåºï¼ˆ3! = 6ç§ï¼‰</li>
<li>é˜¶æ®µ2ï¼šç¡®å®šé€é¤é¡ºåºï¼ˆ3! = 6ç§ï¼‰</li>
<li>æ€»å…±36ç§æ–¹æ¡ˆï¼Œå¯ä»¥ç©·ä¸¾</li>
</ol>
<p>ä¼˜åŒ–æŠ€å·§ï¼š</p>
<ul>
<li>ä½¿ç”¨åˆ†æ”¯é™ç•Œå‰ªæ</li>
<li>ä¼˜å…ˆè®¿é—®æ—¶é—´ç´§æ€¥çš„èŠ‚ç‚¹</li>
<li>è€ƒè™‘å•†å®¶å‡ºé¤æ—¶é—´é¿å…ç­‰å¾…</li>
</ul>
<p>å®é™…å®ç°æ—¶å¯ç”¨åŠ¨æ€è§„åˆ’ä¼˜åŒ–ã€‚</p>
</details>
<h3 id="_8">æŒ‘æˆ˜é¢˜</h3>
<h4 id="4">é¢˜ç›®4ï¼šå¤šç›®æ ‡ä¼˜åŒ–æƒè¡¡</h4>
<p>è®¾è®¡ä¸€ä¸ªè°ƒåº¦ç®—æ³•ï¼ŒåŒæ—¶ä¼˜åŒ–ï¼š</p>
<ul>
<li>å‡†æ—¶ç‡ï¼ˆæœ€å¤§åŒ–ï¼‰</li>
<li>é…é€æˆæœ¬ï¼ˆæœ€å°åŒ–ï¼‰  </li>
<li>éª‘æ‰‹å…¬å¹³æ€§ï¼ˆå‡è¡¡åŒ–ï¼‰</li>
</ul>
<p>å¦‚ä½•è®¾ç½®æƒé‡ï¼Ÿå¦‚ä½•å¤„ç†ç›®æ ‡å†²çªï¼Ÿ</p>
<details>
<summary>Hint</summary>
<p>è€ƒè™‘å¸•ç´¯æ‰˜æœ€ä¼˜å’Œå¤šç›®æ ‡ä¼˜åŒ–æ–¹æ³•ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p>é‡‡ç”¨åˆ†å±‚ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ol>
<li><strong>ç¡¬çº¦æŸä¼˜å…ˆ</strong>ï¼šä¿è¯å‡†æ—¶ç‡ &gt; 95%ä½œä¸ºç¡¬çº¦æŸ</li>
<li><strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼šåœ¨æ»¡è¶³å‡†æ—¶ç‡å‰æä¸‹æœ€å°åŒ–æˆæœ¬</li>
<li><strong>å…¬å¹³æ€§è°ƒèŠ‚</strong>ï¼šä½¿ç”¨è½¯çº¦æŸå¹³è¡¡éª‘æ‰‹è´Ÿè½½</li>
</ol>
<p>æƒé‡è®¾ç½®æ–¹æ³•ï¼š</p>
<ul>
<li>å†å²æ•°æ®å›å½’åˆ†æ</li>
<li>A/Bæµ‹è¯•è¿­ä»£ä¼˜åŒ–</li>
<li>åŠ¨æ€è°ƒæ•´ï¼ˆé«˜å³°æœŸé‡è§†æ•ˆç‡ï¼Œå¹³å³°æœŸé‡è§†å…¬å¹³ï¼‰</li>
</ul>
<p>å†²çªå¤„ç†ï¼š</p>
<ul>
<li>è®¾ç½®ä¼˜å…ˆçº§ï¼šå®‰å…¨&gt;ä½“éªŒ&gt;æ•ˆç‡&gt;æˆæœ¬</li>
<li>ä½¿ç”¨Îµ-çº¦æŸæ³•è½¬åŒ–ä¸ºå•ç›®æ ‡</li>
<li>ç»´æŠ¤å¸•ç´¯æ‰˜å‰æ²¿ä¾›å†³ç­–</li>
</ul>
<p>å…³é”®æ˜¯å»ºç«‹ä¸šåŠ¡ä»·å€¼æ¨¡å‹é‡åŒ–å„ç›®æ ‡ã€‚</p>
</details>
<h4 id="5">é¢˜ç›®5ï¼šå®æ—¶é™çº§ç­–ç•¥</h4>
<p>ç³»ç»Ÿè´Ÿè½½è¾¾åˆ°90%ï¼Œè®¾è®¡ä¸‰çº§é™çº§ç­–ç•¥ï¼Œä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ã€‚</p>
<details>
<summary>Hint</summary>
<p>åŒºåˆ†æ ¸å¿ƒä¸éæ ¸å¿ƒåŠŸèƒ½ï¼Œè®¾è®¡ä¼˜é›…é™çº§ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>ä¸€çº§é™çº§ï¼ˆè´Ÿè½½70-85%ï¼‰</strong>ï¼š</p>
<ul>
<li>å…³é—­å®æ—¶é‡å¹³è¡¡</li>
<li>å‡å°‘å€™é€‰éª‘æ‰‹æ•°é‡åˆ°20</li>
<li>é™ä½è·¯å¾„è§„åˆ’ç²¾åº¦</li>
<li>å»¶é•¿æ‰¹å¤„ç†çª—å£åˆ°3ç§’</li>
</ul>
<p><strong>äºŒçº§é™çº§ï¼ˆè´Ÿè½½85-95%ï¼‰</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨è´ªå¿ƒç®—æ³•æ›¿ä»£ä¼˜åŒ–ç®—æ³•</li>
<li>æœç´¢åŠå¾„ç¼©å°åˆ°1.5km</li>
<li>å…³é—­è·¨åŒºåŸŸè°ƒåº¦</li>
<li>åªä¿ç•™è·ç¦»å’Œæ—¶é—´ä¸¤ä¸ªè¯„åˆ†ç»´åº¦</li>
</ul>
<p><strong>ä¸‰çº§é™çº§ï¼ˆè´Ÿè½½&gt;95%ï¼‰</strong>ï¼š</p>
<ul>
<li>çº¯å°±è¿‘åˆ†é…</li>
<li>å›ºå®šé…é€åŠå¾„1km</li>
<li>å•éª‘æ‰‹æœ€å¤š2å•</li>
<li>å…³é—­æ‰€æœ‰ä¼˜åŒ–åŠŸèƒ½</li>
</ul>
<p>æ¢å¤ç­–ç•¥ï¼š</p>
<ul>
<li>è´Ÿè½½é™ä½åé€çº§æ¢å¤</li>
<li>è®¾ç½®ç¼“å†²åŒºé¿å…éœ‡è¡</li>
<li>ä¿ç•™é™çº§æ—¥å¿—ç”¨äºå¤ç›˜</li>
</ul>
</details>
<h4 id="6">é¢˜ç›®6ï¼šå¼ºåŒ–å­¦ä¹ å»ºæ¨¡</h4>
<p>è®¾è®¡ä¸€ä¸ªå¼ºåŒ–å­¦ä¹ æ¨¡å‹ä¼˜åŒ–è°ƒåº¦ç­–ç•¥ï¼Œå®šä¹‰çŠ¶æ€ç©ºé—´ã€åŠ¨ä½œç©ºé—´å’Œå¥–åŠ±å‡½æ•°ã€‚</p>
<details>
<summary>Hint</summary>
<p>è€ƒè™‘é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹å’Œä»·å€¼å‡½æ•°ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>çŠ¶æ€ç©ºé—´è®¾è®¡</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">state</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;order_distribution&#39;</span><span class="p">:</span> <span class="n">åŒºåŸŸè®¢å•çƒ­åŠ›å›¾</span><span class="p">,</span>
    <span class="s1">&#39;rider_distribution&#39;</span><span class="p">:</span> <span class="n">éª‘æ‰‹ä½ç½®åˆ†å¸ƒ</span><span class="p">,</span>
    <span class="s1">&#39;time_features&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">hour</span><span class="p">,</span> <span class="n">weekday</span><span class="p">,</span> <span class="n">weather</span><span class="p">],</span>
    <span class="s1">&#39;system_load&#39;</span><span class="p">:</span> <span class="n">å½“å‰è´Ÿè½½æŒ‡æ ‡</span><span class="p">,</span>
    <span class="s1">&#39;historical_performance&#39;</span><span class="p">:</span> <span class="n">è¿‘æœŸKPI</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>åŠ¨ä½œç©ºé—´è®¾è®¡</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">action</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;assignment&#39;</span><span class="p">:</span> <span class="n">è®¢å•</span><span class="o">-</span><span class="n">éª‘æ‰‹åˆ†é…çŸ©é˜µ</span><span class="p">,</span>
    <span class="s1">&#39;routing&#39;</span><span class="p">:</span> <span class="n">è·¯å¾„è§„åˆ’å†³ç­–</span><span class="p">,</span>
    <span class="s1">&#39;pricing&#39;</span><span class="p">:</span> <span class="n">åŠ¨æ€å®šä»·è°ƒæ•´</span><span class="p">,</span>
    <span class="s1">&#39;rebalance&#39;</span><span class="p">:</span> <span class="n">è¿åŠ›è°ƒé…æŒ‡ä»¤</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>å¥–åŠ±å‡½æ•°è®¾è®¡</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">reward</span> <span class="o">=</span> <span class="p">(</span>
    <span class="mi">10</span> <span class="o">*</span> <span class="n">on_time_rate</span> <span class="o">+</span>           <span class="c1"># å‡†æ—¶æ¿€åŠ±</span>
    <span class="o">-</span><span class="mi">5</span> <span class="o">*</span> <span class="n">avg_delivery_time</span> <span class="o">+</span>      <span class="c1"># æ—¶æ•ˆæƒ©ç½š</span>
    <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">cost_per_order</span> <span class="o">+</span>         <span class="c1"># æˆæœ¬æƒ©ç½š</span>
    <span class="mi">3</span> <span class="o">*</span> <span class="n">rider_utilization</span> <span class="o">+</span>       <span class="c1"># æ•ˆç‡æ¿€åŠ±</span>
    <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="n">complaint_rate</span> <span class="o">+</span>        <span class="c1"># æŠ•è¯‰æƒ©ç½š</span>
    <span class="mf">0.5</span> <span class="o">*</span> <span class="n">future_state_value</span>      <span class="c1"># é•¿æœŸä»·å€¼</span>
<span class="p">)</span>
</code></pre></div>

<p>è®­ç»ƒç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨å†å²æ•°æ®ç¦»çº¿è®­ç»ƒ</li>
<li>åœ¨çº¿A/Bæµ‹è¯•éªŒè¯</li>
<li>å¢é‡å­¦ä¹ æŒç»­ä¼˜åŒ–</li>
</ul>
</details>
<h4 id="7">é¢˜ç›®7ï¼šå¼‚å¸¸æ£€æµ‹ç³»ç»Ÿ</h4>
<p>è®¾è®¡ä¸€ä¸ªå®æ—¶å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿï¼Œè¯†åˆ«ï¼š</p>
<ul>
<li>éª‘æ‰‹å¼‚å¸¸è¡Œä¸º</li>
<li>è®¢å•å¼‚å¸¸æ¨¡å¼</li>
<li>ç³»ç»Ÿæ€§èƒ½å¼‚å¸¸</li>
</ul>
<details>
<summary>Hint</summary>
<p>ç»“åˆè§„åˆ™å¼•æ“å’Œæœºå™¨å­¦ä¹ æ–¹æ³•ã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>ä¸‰å±‚æ£€æµ‹æ¶æ„</strong>ï¼š</p>
<ol>
<li>
<p><strong>è§„åˆ™å±‚</strong>ï¼ˆå®æ—¶ï¼‰ï¼š
   - é€Ÿåº¦å¼‚å¸¸ï¼š&gt; 60km/h æˆ– &lt; 1km/h
   - ä½ç½®è·³å˜ï¼š1åˆ†é’Ÿå†… &gt; 5km
   - è®¢å•å¼‚å¸¸ï¼šé‡‘é¢ &gt; 1000å…ƒ
   - å“åº”æ—¶é—´ï¼šP99 &gt; 200ms</p>
</li>
<li>
<p><strong>ç»Ÿè®¡å±‚</strong>ï¼ˆå‡†å®æ—¶ï¼‰ï¼š
   - 3-Sigmaå¼‚å¸¸æ£€æµ‹
   - ç§»åŠ¨å¹³å‡åç¦»æ£€æµ‹
   - æ—¶åºè¶‹åŠ¿çªå˜æ£€æµ‹
   - åˆ†å¸ƒåç§»æ£€æµ‹</p>
</li>
<li>
<p><strong>æ¨¡å‹å±‚</strong>ï¼ˆè¿‘å®æ—¶ï¼‰ï¼š
   - Isolation Forestæ£€æµ‹ç¦»ç¾¤ç‚¹
   - LSTMé¢„æµ‹æ­£å¸¸æ¨¡å¼
   - Autoencoderé‡æ„è¯¯å·®
   - èšç±»å¼‚å¸¸æ£€æµ‹</p>
</li>
</ol>
<p><strong>å¤„ç†æµç¨‹</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>æ£€æµ‹ â†’ è¯„åˆ† â†’ åˆ†çº§ â†’ å“åº”
     â†“      â†“      â†“
   ç‰¹å¾   é£é™©   ä¸¥é‡åº¦
   æå–   è¯„ä¼°   åˆ¤å®š
</code></pre></div>

<p><strong>å“åº”ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ä½é£é™©ï¼šè®°å½•æ—¥å¿—</li>
<li>ä¸­é£é™©ï¼šäººå·¥å®¡æ ¸</li>
<li>é«˜é£é™©ï¼šè‡ªåŠ¨å¹²é¢„</li>
<li>æé«˜é£é™©ï¼šç†”æ–­ä¿æŠ¤</li>
</ul>
</details>
<h4 id="8">é¢˜ç›®8ï¼šç³»ç»Ÿå®¹é‡è§„åˆ’</h4>
<p>é¢„æµ‹æœªæ¥3ä¸ªæœˆçš„ç³»ç»Ÿå®¹é‡éœ€æ±‚ï¼Œè€ƒè™‘ï¼š</p>
<ul>
<li>è®¢å•å¢é•¿è¶‹åŠ¿</li>
<li>å­£èŠ‚æ€§æ³¢åŠ¨</li>
<li>ä¿ƒé”€æ´»åŠ¨å½±å“</li>
<li>æ–°åŸå¸‚æ‰©å¼ </li>
</ul>
<p>è®¾è®¡å®¹é‡è§„åˆ’æ¨¡å‹å’Œæ‰©å®¹ç­–ç•¥ã€‚</p>
<details>
<summary>Hint</summary>
<p>ä½¿ç”¨æ—¶åºé¢„æµ‹å’Œåœºæ™¯æ¨¡æ‹Ÿã€‚</p>
</details>
<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>
<p><strong>é¢„æµ‹æ¨¡å‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>åŸºç¡€é¢„æµ‹</strong>ï¼š
   - ARIMAæ¨¡å‹é¢„æµ‹æ—¥å¸¸è®¢å•é‡
   - è€ƒè™‘å‘¨æœŸæ€§ï¼ˆæ—¥ã€å‘¨ã€æœˆï¼‰
   - çº¿æ€§å¢é•¿è¶‹åŠ¿æ‹Ÿåˆ</p>
</li>
<li>
<p><strong>åœºæ™¯å åŠ </strong>ï¼š
   - ä¿ƒé”€åœºæ™¯ï¼šå†å²ä¿ƒé”€æ”¾å¤§ç³»æ•°
   - èŠ‚å‡æ—¥åœºæ™¯ï¼šèŠ‚å‡æ—¥å³°å€¼æ¨¡å‹
   - å¤©æ°”åœºæ™¯ï¼šæ¶åŠ£å¤©æ°”å½±å“å› å­
   - æ–°åŸåœºæ™¯ï¼šSå‹å¢é•¿æ›²çº¿</p>
</li>
<li>
<p><strong>å®¹é‡è®¡ç®—</strong>ï¼š</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">capacity</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">base_load</span> <span class="o">*</span> <span class="n">growth_rate</span> <span class="o">*</span> 
    <span class="n">seasonal_factor</span> <span class="o">*</span> 
    <span class="n">event_multiplier</span> <span class="o">*</span> 
    <span class="n">safety_margin</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>æ‰©å®¹ç­–ç•¥</strong>ï¼š</p>
<ol>
<li>
<p><strong>è®¡ç®—èµ„æº</strong>ï¼š
   - æå‰2å‘¨æ‰©å®¹
   - å¼¹æ€§ä¼¸ç¼©é…ç½®
   - å¤šåœ°åŸŸå®¹ç¾</p>
</li>
<li>
<p><strong>å­˜å‚¨èµ„æº</strong>ï¼š
   - æ•°æ®åˆ†ç‰‡ç­–ç•¥
   - å†·çƒ­æ•°æ®åˆ†ç¦»
   - å‹ç¼©å½’æ¡£ç­–ç•¥</p>
</li>
<li>
<p><strong>ç½‘ç»œèµ„æº</strong>ï¼š
   - CDNæ‰©å®¹
   - å¸¦å®½é¢„ç•™
   - è´Ÿè½½å‡è¡¡è°ƒæ•´</p>
</li>
</ol>
<p><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>CPUä½¿ç”¨ç‡ &lt; 70%</li>
<li>å†…å­˜ä½¿ç”¨ç‡ &lt; 80%</li>
<li>å»¶è¿ŸP99 &lt; 100ms</li>
<li>é”™è¯¯ç‡ &lt; 0.01%</li>
</ul>
<p>å…³é”®æ˜¯å»ºç«‹é¢„æµ‹-è§„åˆ’-æ‰§è¡Œ-åé¦ˆé—­ç¯ã€‚</p>
</details>
<h2 id="_9">å¸¸è§é™·é˜±ä¸é”™è¯¯</h2>
<h3 id="1_3">1. è¿‡åº¦ä¼˜åŒ–é™·é˜±</h3>
<p><strong>é”™è¯¯</strong>ï¼šè¿½æ±‚å…¨å±€æœ€ä¼˜è§£ï¼Œå¯¼è‡´è®¡ç®—æ—¶é—´è¿‡é•¿
<strong>æ­£ç¡®</strong>ï¼šæ¥å—æ¬¡ä¼˜è§£ï¼Œä¿è¯å®æ—¶æ€§</p>
<h3 id="2_2">2. å¿½è§†è¾¹ç¼˜åœºæ™¯</h3>
<p><strong>é”™è¯¯</strong>ï¼šåªè€ƒè™‘æ­£å¸¸æƒ…å†µï¼Œå¼‚å¸¸æ—¶ç³»ç»Ÿå´©æºƒ
<strong>æ­£ç¡®</strong>ï¼šå……åˆ†çš„å¼‚å¸¸å¤„ç†å’Œé™çº§ç­–ç•¥</p>
<h3 id="3_4">3. é™æ€æƒé‡é—®é¢˜</h3>
<p><strong>é”™è¯¯</strong>ï¼šä½¿ç”¨å›ºå®šæƒé‡ï¼Œæ— æ³•é€‚åº”å˜åŒ–
<strong>æ­£ç¡®</strong>ï¼šåŠ¨æ€è°ƒæ•´æƒé‡ï¼Œé€‚åº”ä¸åŒåœºæ™¯</p>
<h3 id="4_1">4. æ•°æ®ä¸€è‡´æ€§é—®é¢˜</h3>
<p><strong>é”™è¯¯</strong>ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ•°æ®ä¸ä¸€è‡´å¯¼è‡´é”™è¯¯å†³ç­–
<strong>æ­£ç¡®</strong>ï¼šåˆç†çš„ä¸€è‡´æ€§æ¨¡å‹å’Œå†²çªè§£å†³æœºåˆ¶</p>
<h3 id="5_1">5. å†·å¯åŠ¨é—®é¢˜</h3>
<p><strong>é”™è¯¯</strong>ï¼šæ–°éª‘æ‰‹/æ–°åŒºåŸŸç¼ºä¹å†å²æ•°æ®ï¼Œè°ƒåº¦æ•ˆæœå·®
<strong>æ­£ç¡®</strong>ï¼šè®¾è®¡åˆç†çš„å†·å¯åŠ¨ç­–ç•¥å’Œå¿«é€Ÿå­¦ä¹ æœºåˆ¶</p>
<h3 id="6_1">6. å…¬å¹³æ€§å¿½è§†</h3>
<p><strong>é”™è¯¯</strong>ï¼šåªä¼˜åŒ–æ•ˆç‡ï¼Œå¯¼è‡´éª‘æ‰‹æ€¨å£°è½½é“
<strong>æ­£ç¡®</strong>ï¼šå¹³è¡¡æ•ˆç‡ä¸å…¬å¹³ï¼Œä¿è¯å¯æŒç»­å‘å±•</p>
<h2 id="_10">è°ƒè¯•æŠ€å·§</h2>
<ol>
<li><strong>åˆ†å±‚è°ƒè¯•</strong>ï¼šä»å•è®¢å•â†’æ‰¹è®¢å•â†’å…¨é‡é€æ­¥éªŒè¯</li>
<li><strong>ä»¿çœŸç¯å¢ƒ</strong>ï¼šæ„å»ºåŸå¸‚çº§ä»¿çœŸç³»ç»Ÿè¿›è¡Œå‹åŠ›æµ‹è¯•</li>
<li><strong>å½±å­æ¨¡å¼</strong>ï¼šæ–°ç­–ç•¥å…ˆåœ¨å½±å­ç¯å¢ƒè¿è¡Œå¯¹æ¯”</li>
<li><strong>ç°åº¦å‘å¸ƒ</strong>ï¼šå°æµé‡â†’å¤§æµé‡é€æ­¥æ”¾å¼€</li>
<li><strong>å›æ»šæœºåˆ¶</strong>ï¼šä¿è¯å¿«é€Ÿå›æ»šèƒ½åŠ›</li>
<li><strong>æ—¥å¿—åˆ†æ</strong>ï¼šå®Œå–„çš„æ—¥å¿—å’Œè¿½è¸ªç³»ç»Ÿ</li>
<li><strong>æ€§èƒ½åˆ†æ</strong>ï¼šä½¿ç”¨profilerå®šä½æ€§èƒ½ç“¶é¢ˆ</li>
</ol>
<hr />
<p>é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ åº”è¯¥æŒæ¡äº†å¤§è§„æ¨¡å®æ—¶è°ƒåº¦ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†å’Œå®ç°æŠ€æœ¯ã€‚è°ƒåº¦å¼•æ“çš„è®¾è®¡éœ€è¦åœ¨å¤šä¸ªç»´åº¦é—´å¯»æ‰¾å¹³è¡¡ï¼Œæ—¢è¦è¿½æ±‚ç®—æ³•çš„å…ˆè¿›æ€§ï¼Œä¹Ÿè¦ä¿è¯å·¥ç¨‹çš„å¯é æ€§ã€‚ä¸‹ä¸€ç« æˆ‘ä»¬å°†æ¢è®¨è§„åˆ’å¼•æ“ï¼Œäº†è§£å¦‚ä½•é€šè¿‡ä¸­é•¿æœŸä¼˜åŒ–ä¸ºè°ƒåº¦ç³»ç»Ÿæä¾›æ›´å¥½çš„åŸºç¡€ã€‚</p>
            </article>
            
            <nav class="page-nav"><a href="chapter3.html" class="nav-link prev">â† ç¬¬3ç« ï¼šæœºå™¨å­¦ä¹ å¹³å°</a><a href="chapter5.html" class="nav-link next">ç¬¬5ç« ï¼šè§„åˆ’å¼•æ“ï¼ˆç½‘ç»œ/ç«™ç‚¹/è¿åŠ›ç»“æ„è§„åˆ’ï¼‰ â†’</a></nav>
        </main>
    </div>
</body>
</html>